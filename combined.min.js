try{!Object.prototype.__defineGetter__&&Object.defineProperty({},"x",{get:function(){return!0}}).x&&(Object.defineProperty(Object.prototype,"__defineGetter__",{enumerable:!1,configurable:!0,value:function(e,f){Object.defineProperty(this,e,{get:f,enumerable:!0,configurable:!0})}}),Object.defineProperty(Object.prototype,"__defineSetter__",{enumerable:!1,configurable:!0,value:function(e,f){Object.defineProperty(this,e,{set:f,enumerable:!0,configurable:!0})}}))}catch(defPropException){}var global={};
(function(){global="undefined"==typeof window?process:window;global.Appacitive||(global.Appacitive={runtime:{isNode:"undefined"!=typeof process,isBrowser:"undefined"!=typeof window}});var e=function(a){if(!a||!a.send||"function"!=typeof a.send)throw Error("No applicable httpTransport class found");a.onResponse=this.onResponse;var b=[],d={},k=0,e={},g=0;this.addProcessor=function(a){if(a){a.pre=a.pre||function(){};a.post=a.post||function(){};var b=a.pre;k+=1;d[k]=b;a=a.post;g+=1;e[g]=a}};this.enqueueRequest=
function(a){b.push(a)};this.notify=function(){if(0!==b.length){var k=[],g;for(g in e)e.hasOwnProperty(g)&&k.push(e[g]);for(;0<b.length;){var f=b.shift(),p=[];for(g in d)d.hasOwnProperty(g)&&p.push(d[g](f));a.send(f,k,p)}}};this.onResponse=function(a){console.dir(a)}},f=function(){var a=function(){throw Error("Not Implemented Exception");};this.inOnline=this.send=a;this.onResponse=function(){a()};this.onError=function(){a()}},d=function(){var a=new f;a.type="jQuery based http provider";a.send=function(a,
c,e){"function"==typeof a.beforeSend&&a.beforeSend(a);switch(a.method.toLowerCase()){case "get":$.ajax({url:a.url,type:"GET",async:a.async,beforeSend:function(b){for(var c=0;c<a.headers.length;c+=1)b.setRequestHeader(a.headers[c].key,a.headers[c].value)},success:function(f){try{f=JSON.parse(f)}catch(m){}b(f,c,e);d.onResponse(f,a)},error:function(){d.onError(a)}});break;case "post":$.ajax({url:a.url,type:"POST",async:a.async,contentType:"application/json",data:JSON.stringify(a.data),beforeSend:function(b){for(var c=
0;c<a.headers.length;c+=1)b.setRequestHeader(a.headers[c].key,a.headers[c].value)},success:function(f){try{f=JSON.parse(f)}catch(m){}b(f,c,e);d.onResponse(f,a)},error:function(){d.onError(a)}});break;case "put":$.ajax({url:a.url,type:"PUT",contentType:"application/json",data:JSON.stringify(a.data),async:a.async,beforeSend:function(b){for(var c=0;c<a.headers.length;c+=1)b.setRequestHeader(a.headers[c].key,a.headers[c].value)},success:function(f){try{f=JSON.parse(f)}catch(m){}b(f,c,e);d.onResponse(f,
a)},error:function(){d.onError(a)}});break;case "delete":$.ajax({url:a.url,type:"DELETE",async:a.async,beforeSend:function(b){for(var c=0;c<a.headers.length;c+=1)b.setRequestHeader(a.headers[c].key,a.headers[c].value)},success:function(f){try{f=JSON.parse(f)}catch(m){}b(f,c,e);d.onResponse(f,a)},error:function(){d.onError(a)}});break;default:throw Error("Unrecognized http method: "+a.method);}};a.isOnline=function(){return window.navigator.onLine||!0};var b=function(a,b,c){if(b.length!=c.length)throw Error("Callback length and state length mismatch!");
for(var d=0;d<b.length;d+=1)b[d].apply({},[a,c[d]])},d=a;$=$||{};$.ajax=$.ajax||{};return a},b=function(){var a=new f;a.type="Http provider for nodejs";a.send=function(a,c,f){"function"==typeof a.beforeSend&&a.beforeSend(a);var m=a;a=require("url").parse(m.url);var m=m||{},n;for(n in m)if("headers"==n)for(var p=0;p<m.headers.length;p+=1)d.headers[m.headers[p].key]=m.headers[p].value;else d[n]=m[n];d.host=a.host;d.port=a.port||80;d.path=a.path;d.method=m.method.toUpperCase();"string"!=typeof d.data&&
(d.data=JSON.stringify(d.data));d.headers["Content-Length"]=d.data.length;d.headers["Content-Type"]="application/json";n=e.request(d,function(a){var d="";a.setEncoding("utf8");a.on("data",function(a){d+=a});a.on("end",function(){if("application/json"==a.headers["content-type"]&&"200"==a.statusCode){"{"!=d[0]&&(d=d.substr(1,d.length-1));a.json=JSON.parse(d);var e=a.json;if(c.length!=f.length)throw Error("Callback length and state length mismatch!");for(var k=0;k<c.length;k+=1)c[k].apply({},[e,f[k]]);
b.onResponse(a.json,m)}else a.text=d,b.onError(m,a)})});n.write(d.data);n.on("error",function(){res.text=receivedData;b.onError(m,res)});n.end()};a.isOnline=function(){return!0};var b=a,d={host:"localhost",port:80,path:"",data:"{}",method:"GET",headers:{"Content-Type":"application/json",accept:"application/json"}},e=require("http");return a};global.Appacitive.http=new function(){var a=global.Appacitive.runtime.isBrowser?new d:new b,h=new e(a),f=!1;this.pause=function(){f=!0};this.unpause=function(){f=
!1};this.addProcessor=function(a){var b=Error('Must provide a processor object with either a "pre" function or a "post" function.');if(!a)throw b;if(!a.pre&&!a.post)throw b;h.addProcessor(a)};this.send=function(b){h.enqueueRequest(b);a.isOnline()&&!1==f&&h.notify()};this.flush=function(b){b?h.notify():a.isOnline()&&h.notify()};this.onError=function(a){if(a.onError)if(a.context)a.onError.apply(a.context,[]);else a.onError()};a.onError=this.onError;this.onResponse=function(a,b){if(b.onSuccess)if(b.context)b.onSuccess.apply(b.context,
[a]);else b.onSuccess(a)};a.onResponse=this.onResponse};global.Appacitive.HttpRequest=function(){this.url="";this.data={};this.async=!0;this.headers=[];this.method="GET"};global.Appacitive&&global.Appacitive.http&&global.Appacitive.http.addProcessor({pre:function(){return(new Date).getTime()},post:function(a,b){var d=(new Date).getTime()-b;a._timeTakenInMilliseconds=d}});var a=global;a.Appacitive&&a.Appacitive.http&&a.Appacitive.http.addProcessor({pre:function(a){return a},post:function(){}})})();
for(var t=0;0<t--;){var req1=new Appacitive.HttpRequest;req1.url="https://apis.appacitive.com/sessionservice.svc/getGraph?rawData=true&from=-1hours&target=stats.pgossamer.account{0}.application1918338163933441.deployment10938369762787624.success";req1.method="get";req1.headers=[{key:"appacitive-session",value:"BxqkdySwptR0C5iaJfWXd2+6bkWYtEmMYuPC77odDXE="},{key:"appacitive-environment",value:"sandbox"}];req1.onSuccess=function(e){console.dir(e)};req1.onError=function(){console.log("error occured")};
Appacitive.http.send(req1)}
(function(e){String.format=function(d,b){if(1>=arguments.length)return d;for(var a=arguments.length-2,c=0;c<=a;c++)d=d.replace(RegExp("\\{"+c+"\\}","gi"),arguments[c+1]);return d};String.prototype.toPascalCase=function(){return this.charAt(0).toUpperCase()+this.slice(1)};String.prototype.trimChar=function(d){var b=RegExp("^"+d),a=this;b.test(a)&&(a=a.slice(1,a.length));b=RegExp(d+"$");b.test(a)&&(a=a.slice(0,-1));return a};String.toSearchString=function(d){"undefined"==typeof d&&(d="");for(var b=
"",a=0;a<d.length;a+=1)-1==" .,;#".indexOf(d[a])&&(b+=d[a]);return b=b.toLowerCase()};String.contains=function(d,b){return-1!=d.indexOf(b)};String.startsWith=function(d,b){return 0==d.indexOf(b)};e.dateFromWcf=function(d,b){var a=/Date\(([^)]+)\)/.exec(d);if(2!=a.length){if(!b)return s;throw Error(s+" is not .net json date.");}return new Date(parseFloat(a[1]))};var f=function(){e.Appacitive.bag=e.Appacitive.bag||{};e.Appacitive.bag.accountName=e.Appacitive.bag.accountName||{};e.Appacitive.bag.selectedType=
e.Appacitive.bag.selectedType||{};e.Appacitive.bag.apps=e.Appacitive.bag.apps||{};e.Appacitive.bag.apps.selected=e.Appacitive.bag.apps.selected||{};e.Appacitive.bag.apps.selected.name=e.Appacitive.bag.apps.selected.name||{};e.Appacitive.bag.selectedCatalog=e.Appacitive.bag.selectedCatalog||{};e.Appacitive.bag.selectedCatalog.Id=e.Appacitive.bag.selectedCatalog.Id||0;e.Appacitive.bag.selectedCatalog.blueprintid=e.Appacitive.bag.selectedCatalog.blueprintid||0;e.Appacitive.bag.selectedCatalog.BlueprintId=
e.Appacitive.bag.selectedCatalog.BlueprintId||0;e.Appacitive.models=e.Appacitive.models||{};e.Appacitive.models.deploymentCollection=e.Appacitive.models.deploymentCollection||{};e.Appacitive.models.deploymentCollection.deployments=e.Appacitive.models.deploymentCollection.deployments||{};var d=(e.Appacitive.config||{apiBaseUrl:""}).apiBaseUrl;d.lastIndexOf("/")==d.length-1&&(d=d.substring(0,d.length-1));this.email={emailServiceUrl:"email",getSendEmailUrl:function(){return String.format("{0}/send",
this.emailServiceUrl)}};this.user={userServiceUrl:d+"/user",getCreateUserUrl:function(){return String.format("{0}/create",this.userServiceUrl)},getAuthenticateUserUrl:function(){return String.format("{0}/authenticate",this.userServiceUrl)},getUpdateUserUrl:function(b){return String.format("{0}/{1}",this.userServiceUrl,b)},getUserUrl:function(b){return String.format("{0}/{1}",this.userServiceUrl,b)},getUserDeleteUrl:function(b){return String.format("{0}/{1}",this.userServiceUrl,b)},getSearchAllUrl:function(b,
a,c){b="";b=String.format("{0}/search/user/all",(new f).article.articleServiceUrl);b=c?b+"?psize="+c:b+"?psize=10";if("undefined"!==typeof a&&0<a.length)for(c=0;c<a.length;c+=1)0!=a[c].trim().length&&(b=b+"&"+a[c]);return b},getGetAllLinkedAccountsUrl:function(b){return String.format("{0}/{1}/linkedaccounts",this.userServiceUrl,b)}};this.article={articleServiceUrl:d+"article",getGetUrl:function(b,a){return String.format("{0}/{1}/{2}",this.articleServiceUrl,b,a)},getMultiGetUrl:function(b,a,c){return String.format("{0}/multiGet/{1}/{2}",
this.articleServiceUrl,a,c)},getMultiDeleteUrl:function(b,a){return String.format("{0}/multidelete/{1}",this.articleServiceUrl,a)},getSearchAllUrl:function(b,a,c,d){b="";b=String.format("{0}/search/{1}/all",this.articleServiceUrl,a);b=d?b+"?psize="+d:b+"?psize=10";if("undefined"!==typeof c&&0<c.length)for(a=0;a<c.length;a+=1)0!=c[a].trim().length&&(b=b+"&"+c[a]);return b},getProjectionQueryUrl:function(){return String.format("{0}/search/project",this.articleServiceUrl)},getPropertiesSearchUrl:function(b,
a,c){b=String.format("{0}/search/{1}/all",this.articleServiceUrl,a);return b+("?properties="+c)},getDeleteUrl:function(b,a){return String.format("{0}/{1}/{2}?verbose=true&debug=true",this.articleServiceUrl,b,a)},getCreateUrl:function(b){return String.format("{0}/{1}",this.articleServiceUrl,b)},getUpdateUrl:function(b,a){return String.format("{0}/{1}/{2}",this.articleServiceUrl,b,a)}};this.connection={connectionServiceUrl:d+"connection",getGetUrl:function(b,a){return String.format("{0}/{1}/{2}",this.connectionServiceUrl,
b,a)},getCreateUrl:function(b){return String.format("{0}/{1}",this.connectionServiceUrl,b)},getUpdateUrl:function(b,a,c){return String.format("{0}/update/{1}/{2}",this.connectionServiceUrl,a,c)},getDeleteUrl:function(b,a){return String.format("{0}/{1}/{2}",this.connectionServiceUrl,b,a)},getMultiDeleteUrl:function(b,a){return String.format("{0}/multidelete/{1}",this.connectionServiceUrl,a)},getSearchByArticleUrl:function(b,a,c,d,e){b="";b=String.format("{0}/{1}/find/all?label={2}&articleid={3}",this.connectionServiceUrl,
a,d,c);if("undefined"!==typeof e&&0<e.length)for(a=0;a<e.length;a+=1)b=b+"&"+e[a];return b},getConnectedArticles:function(b,a,c,d){b="";b=String.format("{0}/{1}/{2}/find",this.connectionServiceUrl,a,c);if(d&&d.length&&0<d.length)for(a=0;a<d.length;a+=1)b=0==a?b+("?"+d[a]):b+("&"+d[a]);return b},getInterconnectsUrl:function(){var b="";return b=String.format("{0}/connectedarticles",this.connectionServiceUrl)},getPropertiesSearchUrl:function(b,a,c){b=String.format("{0}/{1}/find/all",this.connectionServiceUrl,
a);return b+("?properties="+c)}};this.cannedList={cannedListServiceUrl:d+"/list",getGetListItemsUrl:function(b){return String.format("{0}/list/{1}/contents",this.cannedListServiceUrl,b)}};this.push={pushServiceUrl:"push",getPushUrl:function(){return String.format("{0}/",this.pushServiceUrl)},getGetNotificationUrl:function(b){return String.format("{0}/notification/{1}",this.pushServiceUrl,b)},getGetAllNotificationsUrl:function(b){return String.format("{0}/getAll?psize={1}&pnum={2}",this.pushServiceUrl,
b.psize,b.pnum)}};this.query={params:function(b){var a=[];return""==location.search||-1==location.search.indexOf("?")?a:b?(b=b.toLowerCase(),location.search.split("?")[1].split("&").forEach(function(c,d){var e=d.split("="),k=e[1];2<e.length&&e.forEach(function(a){0==a||1==a||(k=k+"="+e[a])});e[0].toLowerCase()==b&&(a=[e[0],k])}),a):location.search.split("?")[1].split("=")}}};e.Appacitive.storage=e.Appacitive.storage||{};e.Appacitive.storage.urlFactory=new f})(global);
(function(e){e.Appacitive.eventManager=new function(){var e={};this.subscribe=function(d,b){if("string"!=typeof d||"function"!=typeof b)throw Error("Incorrect subscription call");"undefined"==typeof e[d]&&(e[d]=[]);var a;a=function(){return Math.floor(65536*Math.random()).toString(16)};a=a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a();e[d].push({callback:b,id:a});return a};this.unsubscribe=function(d){if(!d)return!1;var b=-1,a=null,c;for(c in e)for(var h=0;h<e[c].length;h+=1)if(e[c][h].id==d){b=h;
a=c;break}return-1!=b?(e[a].splice(b,1),!0):!1};this.fire=function(d,b,a){if("string"!=typeof d)throw Error("Incorrect fire call");if("undefined"==typeof a||null===a)a={};a.eventName=d;console&&(console.log&&"function"==typeof console.log)&&console.log(d+" fired");if("undefined"!=typeof e.all)for(var c=0;c<e.all.length;c+=1)e.all[c].callback(b,a);c=function(a,b,c){setTimeout(function(){a(b,c)},0)};if("undefined"!=typeof e[d])for(var h=0;h<e[d].length;h+=1)c(e[d][h].callback,b,a)};this.clearSubscriptions=
function(d){if("string"!=typeof d)throw Error("Event Name must be string in EventManager.clearSubscriptions");e[d]&&(e[d].length=0);return this};this.clearAndSubscribe=function(d,b){this.clearSubscriptions(d);this.subscribe(d,b)};this.dump=function(){console.dir(e)}}})(global);(function(e){e.Appacitive.config={apiBaseUrl:"https://apis.appacitive.com/"}})(global);
(function(e){e.Appacitive.session=new function(){var f=function(){this.apikey="";this.isnonsliding=!1;this.usagecount=-1;this.windowtime=240},d=null,b=null,a=null;this.useApiKey=!0;this.onSessionCreated=function(){};this.recreate=function(){e.Appacitive.session.create(b)};this.create=function(c){b=c=c||{};var h=new f;c.apikey?(h.apikey=c.apikey||"",a=h.apikey):h.apikey=a;h.isnonsliding=c.isnonsliding||h.isnonsliding;h.usagecount=c.usagecount||h.usagecount;h.windowtime=c.windowtime||h.windowtime;c=
new e.Appacitive.HttpRequest;c.url=e.Appacitive.config.apiBaseUrl+"application.svc/session";c.method="put";c.data=h;c.onSuccess=function(a){a&&a.status&&"200"==a.status.code?(d=a.session.sessionkey,e.Appacitive.session.useApiKey=!1,e.Appacitive.eventManager.fire("session.success",{},a),e.Appacitive.session.onSessionCreated()):e.Appacitive.eventManager.fire("session.error",{},a)};e.Appacitive.http.send(c)};var c=null,h=!1;e.Appacitive.http.addProcessor({pre:function(b){e.Appacitive.session.useApiKey?
b.headers.push({key:"appacitive-apikey",value:a}):b.headers.push({key:"appacitive-session",value:d});!0===h&&(1==b.headers.filter(function(a){return"appacitive-user-auth"==a.key}).length?b.headers.forEach(function(a){"appacitive-user-auth"==a.key&&(a.value=c)}):b.headers.push({key:"appacitive-user-auth",value:c}))}});this.setUserAuthHeader=function(a){h=!0;c=a};this.removeUserAuthHeader=function(){h=!1};this.isSessionValid=function(a){if(!a)return!0;if(a.status){if(a.status.code&&("8027"==a.status.code||
"8002"==a.status.code))return!1}else if(a.code&&("8027"==a.code||"8002"==a.code))return!1;return!0};this.resetSession=function(){d=null};this.get=function(){return d};this.setSession=function(a){d=a};this.setApiKey=function(b){a=b};var j="sandbox";this.__defineGetter__("environment",function(){return j});this.__defineSetter__("environment",function(a){"sandbox"!=a&&"live"!=a&&(a="sandbox");j=a})};e.Appacitive.initialize=function(f){e.Appacitive.session.setApiKey(f.apikey||"");e.Appacitive.session.environment=
f.env||"";e.Appacitive.useApiKey=!0}})(global);(function(e){e.Appacitive&&e.Appacitive.http&&e.Appacitive.http.addProcessor({pre:function(f){f.headers.push({key:"appacitive-environment",value:e.Appacitive.session.environment})}})})(global);
(function(e){e.Appacitive.queries={};var f=function(a){a=a||{};this.pageNumber=a.pageNumber||1;this.pageSize=a.pageSize||200};f.prototype.toString=function(){return"psize="+this.pageSize+"&pnum="+this.pageNumber};var d=function(a){a=a||{};this.orderBy=a.orderBy||"__UtcLastUpdatedDate";this.isAscending="undefined"==typeof a.isAscending?!1:a.isAscending};d.prototype.toString=function(){return"orderBy="+this.orderBy+"&isAsc="+this.isAscending};var b=function(a){var b=a||{};this.pageQuery=new f(a);this.sortQuery=
new d(a);this.type=a.type||"article";this.baseType=a.schema||a.relation;this.freeText=this.filter="";this.extendOptions=function(a){for(var e in a)b[e]=a[e];this.pageQuery=new f(b);this.sortQuery=new d(b)};this.setFilter=function(a){this.filter=a};this.setFreeText=function(a){this.freeText=a};this.toUrl=function(){var a=e.Appacitive.config.apiBaseUrl+this.type+".svc/"+this.baseType+"/find/all?"+this.pageQuery.toString()+"&"+this.sortQuery.toString();0<this.filter.trim().length&&(a+="&query="+this.filter);
0<this.freeText.trim().length&&(a+="&freetext="+this.freeText+"&language=en");return a}};e.Appacitive.queries.SearchAllQuery=function(a){a=a||{};var c=new b(a);this.toRequest=function(){var a=new e.Appacitive.HttpRequest;a.url=c.toUrl();a.method="get";return a};this.extendOptions=function(){c.extendOptions.apply(c,arguments)};this.getOptions=function(){var a={},b;for(b in c)c.hasOwnProperty(b)&&"function"!=typeof c[b]&&(a[b]=c[b]);return a}};e.Appacitive.queries.BasicFilterQuery=function(a){a=a||
{};var c=new b(a);this.toRequest=function(){var b=new e.Appacitive.HttpRequest;b.url=c.toUrl();a.filter&&0<a.filter.trim().length&&(b.url+="&query="+a.filter);a.freeText&&0<a.freeText.trim().length&&(b.url+="&freetext="+a.freeText+"&language=en");b.method="get";return b};this.extendOptions=function(){c.extendOptions.apply(c,arguments)};this.getOptions=function(){var a={},b;for(b in c)c.hasOwnProperty(b)&&"function"!=typeof c[b]&&(a[b]=c[b]);return a}};e.Appacitive.queries.GraphQuery=function(a){a=
a||{};var c=new b(a);this.toRequest=function(){var b=new e.Appacitive.HttpRequest;b.url=e.Appacitive.config.apiBaseUrl;b.url+=e.Appacitive.storage.urlFactory.article.getProjectionQueryUrl();b.method="post";b.data=a.graphQuery;return b};this.extendOptions=function(){c.extendOptions.apply(c,arguments)};this.getOptions=function(){var a={},b;for(b in c)c.hasOwnProperty(b)&&"function"!=typeof c[b]&&(a[b]=c[b]);return a}};e.Appacitive.queries.ConnectedArticlesQuery=function(a){a=a||{};var c=new b(a);this.toRequest=
function(){var b=new e.Appacitive.HttpRequest;b.url=e.Appacitive.config.apiBaseUrl+"connection/"+a.relation+"/"+a.articleId+"/find?"+c.pageQuery.toString()+"&"+c.sortQuery.toString();return b};this.extendOptions=function(){c.extendOptions.apply(c,arguments)};this.setFilter=function(){c.setFilter.apply(c,arguments)};this.setFreeText=function(){c.setFreeText.apply(c,arguments)};this.getOptions=function(){var a={},b;for(b in c)c.hasOwnProperty(b)&&"function"!=typeof c[b]&&(a[b]=c[b]);return a}}})(global);
(function(e){e.Appacitive.BaseObject=function(f){var d=null,b=f=f||{};this.fetch=function(a,c){a=a||function(){};c=c||function(){};if(b.__id){var f=this,l=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory[this.type].getGetUrl(b.__schematype||b.__relationtype,b.__id),g=new e.Appacitive.HttpRequest;g.url=l;g.method="get";g.onSuccess=function(e){if(e&&e.article){d=e.article;b.__id=e.article.__id;for(var g in e.article)"undefined"==typeof b[g]&&(b[g]=e.article[g]);f.___collection&&"article"==
f.___collection.collectionType&&f.___collection.addToCollection(f);a()}else c(e.status)};e.Appacitive.http.send(g)}else c()};this.del=function(a,c,d){a=a||function(){};c=c||function(){};d=d||{};if(b.__id){var f=this,g=e.Appacitive.config.apiBaseUrl,g=g+e.Appacitive.storage.urlFactory[this.type].getDeleteUrl(b.__schematype||b.__relationtype,b.__id);b&&(b.__schematype&&"user"==b.__schematype.toLowerCase())&&(g=e.Appacitive.config.apiBaseUrl,g+=e.Appacitive.storage.urlFactory.user.getUserDeleteUrl(b.__id));
d.deleteConnections&&!0===d.deleteConnections&&(g=-1==g.indexOf("?")?g+"?deleteconnections=true":g+"&deleteconnections=true");d=new e.Appacitive.HttpRequest;d.url=g;d.method="delete";d.onSuccess=function(d){"200"==d.code?(f.___collection&&f.___collection.removeById(b.__id),a()):c(d)};d.beforeSend=function(a){console.log("DELETE: "+a.url)};e.Appacitive.http.send(d)}else this.___collection.removeByCId(this.__cid),a()};this.getArticle=function(){return b};this.attributes=function(){if(0===arguments.length)return b.__attributes||
(b.__attributes={}),b.__attributes;if(1==arguments.length)return b.__attributes||(b.__attributes={}),b.__attributes[arguments[0]];if(2==arguments.length)b.__attributes||(b.__attributes={}),b.__attributes[arguments[0]]=arguments[1];else throw Error(".attributes() called with an incorrect number of arguments. 0, 1, 2 are supported.");};this.aggregates=function(){var a={},c;for(c in b){if(!b.hasOwnProperty(c))return;"$"==c[0]&&(a[c]=b[c])}if(0===arguments.length)return a;if(1==arguments.length)return a[arguments[0]];
throw Error(".aggregates() called with an incorrect number of arguments. 0, and 1 are supported.");};this.get=function(a){if(a)return b[a]};this.set=function(a,c){a&&(b[a]=c);return c};this.save=function(d,e){b.__id?a.apply(this,arguments):c.apply(this,arguments)};var a=function(a,c){var f=!1,l=JSON.parse(JSON.stringify(d)),g;for(g in b)"undefined"==typeof b[g]||null===b[g]?(l[g]=null,f=!0):b[g]!=d[g]?(l[g]=b[g],f=!0):b[g]==d[g]&&delete l[g];f&&(f=new e.Appacitive.HttpRequest,f.url=e.Appacitive.config.apiBaseUrl+
e.Appacitive.storage.urlFactory[this.type].getUpdateUrl(b.__schematype||b.__relationtype,d.__id),f.method="post",f.data=l,f.onSuccess=function(b){b&&(b.article||b.connection||b.user)?(d=b.article,"function"==typeof a&&a()):"function"==typeof c&&c(b.status)},e.Appacitive.http.send(f))},c=function(a,c){var f=this,l=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory[this.type].getCreateUrl(b.__schematype||b.__relationtype);b.__schematype&&"user"==b.__schematype.toLowerCase()&&(l=e.Appacitive.config.apiBaseUrl+
e.Appacitive.storage.urlFactory.user.getCreateUserUrl());var g=new e.Appacitive.HttpRequest;g.url=l;g.method="put";g.data=b;g.onSuccess=function(e){var g=null;e&&(g=e.article||e.connection||e.user);if(e&&g){d=g;b.__id=g.__id;for(var l in g)"undefined"==typeof b[l]&&(b[l]=g[l]);f.connectionCollections&&0<f.connectionCollections.length&&f.connectionCollections.forEach(function(a){a.getQuery().extendOptions({articleId:b.__id})});"function"==typeof a&&a()}else"function"==typeof c&&c(e.status)};e.Appacitive.http.send(g)}}})(global);
(function(e){var f=function(){return Math.floor(65536*Math.random()).toString(16)};e.Appacitive.GUID=function(){var d=f()+f()+"-"+f()+"-"+f()+"-"+f()+"-"+f()+f()+f(),b="",a,c,e,j,k,l,g=0,d=d.replace(/\r\n/g,"\n");c="";for(e=0;e<d.length;e++)j=d.charCodeAt(e),128>j?c+=String.fromCharCode(j):(127<j&&2048>j?c+=String.fromCharCode(j>>6|192):(c+=String.fromCharCode(j>>12|224),c+=String.fromCharCode(j>>6&63|128)),c+=String.fromCharCode(j&63|128));for(d=c;g<d.length;)a=d.charCodeAt(g++),c=d.charCodeAt(g++),
e=d.charCodeAt(g++),j=a>>2,a=(a&3)<<4|c>>4,k=(c&15)<<2|e>>6,l=e&63,isNaN(c)?k=l=64:isNaN(e)&&(l=64),b=b+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(j)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l);return b.toString()}})(global);
(function(e){e.Appacitive.ArticleCollection=function(f){var d=null,b=null,a=[],c=f;this.collectionType="article";if(!f||!f.schema)throw Error("Must provide schema while initializing ArticleCollection.");var h=this,j=function(a){d=a.schema;a.type="article";b=new e.Appacitive.queries.SearchAllQuery(a);h.extendOptions=b.extendOptions;c=a};this.setFilter=function(a){c.filter=a;c.type="article";c.schema=d;b=new e.Appacitive.queries.BasicFilterQuery(f)};this.setFreeText=function(a){!a&&0==a.trim().length&&
(c.freeText="");c.freeText=a;c.type="article";c.schema=d;b=new e.Appacitive.queries.BasicFilterQuery(f)};this.reset=function(){d=c=null;a.length=0;b=null};this.getQuery=function(){return b};this.setOptions=j;j(f);this.get=function(b){if(b!=parseInt(b,10))return null;b=parseInt(b,10);return"number"!=typeof b||b>=a.length?null:a.slice(b,b+1)[0]};this.addToCollection=function(b){if(!b||b.get("__schematype")!=d)throw Error("Null article passed or schema type mismatch");var c=null;a.forEach(function(a,
d){a.get("__id")==b.get("__id")&&(c=d)});0!=c?a.splice(c,1):a.push(b)};this.getArticle=function(b,c,d){c=c||function(){};d=d||function(){};var e=a.filter(function(a){return a.get("__id")==b});1==e.length?c(Array.prototype.slice.call(e)[0]):d()};this.getAll=function(){return Array.prototype.slice.call(a)};this.getAllArticles=function(){return Array.prototype.slice.call(a).map(function(a){return a.getArticle()})};this.removeById=function(b){if(!b)return!1;var c=null;a.forEach(function(a,d){a.getArticle().__id&&
a.getArticle().__id==b&&(c=d)});return null!==c?(a.splice(c,1),!0):!1};this.removeByCId=function(b){if(!b)return!1;var c=null;a.forEach(function(a,d){a.__cid&&a.__cid==b&&(c=d)});return null!==c?(a.splice(c,1),!0):!1};this.fetch=function(c,d){c=c||function(){};d=d||function(){};a.length=0;var f=b.toRequest();f.onSuccess=function(b){var f=c,g=b.articles;if(g){if(!g.length||0===g.length)g=[];g.forEach(function(b){b=new e.Appacitive.Article(b);b.___collection=h;a.push(b)});f(b.paginginfo||{})}else d(b.status)};
e.Appacitive.http.send(f)};this.fetchByPageNumber=function(a,c,d){b.getOptions().pageQuery.pageNumber=d;this.fetch(a,c)};this.fetchNextPage=function(a,c){b.getOptions().pageQuery.pageNumber+=1;this.fetch(a,c)};this.fetchPreviousPage=function(a,c){var d=b.getOptions().pageQuery;d.pageNumber-=1;0===d.pageNumber&&(d.pageNumber=1);this.fetch(a,c)};this.createNewArticle=function(b){b=b||{};b.__schematype=d;b=new e.Appacitive.Article(b);b.___collection=h;b.__cid=parseInt(1E6*Math.random(),10);a.push(b);
return b};this.map=function(){return a.map.apply(this,arguments)};this.forEach=function(){return a.forEach.apply(this,arguments)};this.filter=function(){return a.filter.apply(this,arguments)}}})(global);
(function(e){e.Appacitive.ConnectionCollection=function(f){var d=null,b=null,a=[],c=[],h=f;this.collectionType="connection";if(!f||!f.relation)throw Error("Must provide relation while initializing ConnectionCollection.");var j=function(a){d=a.relation;a.type="connection";b=new e.Appacitive.queries.SearchAllQuery(a);h=a};this.setFilter=function(a){h.filter=a;h.type="connection";h.relation=d;b=new e.Appacitive.queries.BasicFilterQuery(f)};this.setQuery=function(c){if(!c)throw Error("Invalid query passed to connectionCollection");
a.length=0;b=c};this.reset=function(){d=h=null;articles.length=0;a.length=0;b=null};this.getQuery=function(){return b};this.setOptions=j;j(f);this.get=function(b){if(b!=parseInt(b,10))return null;b=parseInt(b,10);return"number"!=typeof b||b>=a.length?null:a.slice(b,b+1)[0]};this.addToCollection=function(b){if(!b||b.get("__relationtype")!=d)throw Error("Null connection passed or relation type mismatch");var c=null;a.forEach(function(a,d){a.get("__id")==b.get("__id")&&(c=d)});null!==c?a.splice(c,1):
a.push(b)};this.getConnection=function(b,c,d){c=c||function(){};d=d||function(){};var e=a.filter(function(a){return a.get("__id")==b});1==e.length?c(Array.prototype.slice.call(e)[0]):d()};this.getAll=function(){return Array.prototype.slice.call(a)};this.getAllConnections=function(){return Array.prototype.slice.call(a).map(function(a){return a.getConnection()})};this.removeById=function(b){if(!b)return!1;var c=null;a.forEach(function(a,d){a.getConnection().__id&&a.getConnection().__id==b&&(c=d)});
return null!==c?(a.splice(c,1),!0):!1};this.removeByCId=function(b){if(!b)return!1;var c=null;a.forEach(function(a,d){a.__cid&&a.__cid==b&&(c=d)});return null!==c?(a.splice(c,1),!0):!1};var k=this;this.getConnectedArticle=function(a){if(!c||0===c.length)return null;var b=c.filter(function(b){return b.get("__id")==a});return 0<b.length?b[0]:null};this.fetch=function(d,f){d=d||function(){};f=f||function(){};a.length=0;var h=b.toRequest();h.onSuccess=function(b){a:{var h=d;b=b||{};var j=b.connections;
if(!j)if(b.status&&b.status.code&&"200"==b.status.code)j=[];else{f(b.status);break a}if(!j.length||0===j.length)j=[];j.forEach(function(b){var d=new e.Appacitive.Connection(b);d.___collection=k;a.push(d);if(b.__endpointa.article||b.__endpointb.article)b=new e.Appacitive.Article(b.__endpointa.article||b.__endpointb.article),b.___collection=k,c.push(b)});h(b.paginginfo||{})}};e.Appacitive.http.send(h)};this.createNewConnection=function(b){b=b||{};b.__relationtype=d;b=new e.Appacitive.Connection(b);
b.___collection=k;b.__cid=parseInt(1E6*Math.random(),10);a.push(b);return b};this.map=function(){return a.map.apply(this,arguments)};this.forEach=function(b,c){return a.forEach(b,c||this)};this.filter=function(){return a.filter.apply(this,arguments)}}})(global);
(function(e){var f=function(d,b){var a=new e.Appacitive.HttpRequest;a.method="get";a.url=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory.user.getGetAllLinkedAccountsUrl(this.get("__id"));a.onSuccess=function(a){var e=null;a&&(a.identities&&0<a.identities.length)&&(a=a.identities.filter(function(a){return"facebook"==a.authtype.toLowerCase()}),1==a.length&&(e=a[0].username));null!==e?FB.api("/"+e,function(a){a?d(a):b()}):b()};a.onError=function(){b()};e.Appacitive.http.send(a)};e.Appacitive.Article=
function(d){d=new e.Appacitive.BaseObject(d);d.type="article";d.connectionCollections=[];d.get("__schematype")&&"user"==d.get("__schematype").toLowerCase()&&(d.getFacebookProfile=f);return d};e.Appacitive.BaseObject.prototype.getConnectedArticles=function(d){if("article"!=this.type)return null;d=d||{};d.articleId=this.get("__id");var b=new e.Appacitive.ConnectionCollection({relation:d.relation});b.connectedArticle=this;this.connectionCollections.push(b);d=new e.Appacitive.queries.ConnectedArticlesQuery(d);
b.setQuery(d);return b};e.Appacitive.BaseObject.prototype.getConnected=function(d){if("article"!=this.type)return null;d=d||{};d.onSuccess=d.onSuccess||function(){};d.onError=d.onError||function(){};d.articleId=this.get("__id")}})(global);
(function(e){var f=function(d){var b={label:d.label};if(d.articleid)b.articleid=d.articleid;else if(d.article&&"function"==typeof d.article.getArticle)d.article.get("__id")?b.articleid=d.article.get("__id"):b.article=d.article.getArticle();else if("object"==typeof d.article&&d.article.__schematype)d.article.__id?b.articleid=d.article.__id:b.article=d.article;else throw Error("Incorrectly configured endpoints provided to setupConnection");return b};e.Appacitive.Connection=function(d){var b=new e.Appacitive.BaseObject(d);
b.type="connection";b.getConnection=b.getArticle;b.__defineGetter__("connectedArticle",function(){if(!b.___collection.connectedArticle)throw Error("connectedArticle can be accessed only by using the getConnectedArticles call");var a=b.___collection.connectedArticle.get("__id");if(!a)return null;var c=b.getConnection().__endpointa.articleid;b.getConnection().__endpointa.articleid==a&&(c=b.getConnection().__endpointb.articleid);return b.___collection.getConnectedArticle(c)});b.setupConnection=function(a,
c){if(!a||!a.id||a.label||!c||!c.id||c.label)throw Error("Incorrect endpoints configuration passed.");b.set("__endpointa",f(a));b.set("__endpointb",f(c))};return b}})(global);
(function(e){e.Appacitive.Users=new function(){var f=null;this.__defineGetter__("currentUser",function(){return f});this.deleteCurrentUser=function(d,b){if(null===f)throw Error("Current user is not set yet");this.deleteUser(f.__id,d||function(){},b||function(){})};this.deleteUser=function(d,b,a){b=b||function(){};a=a||function(){};var c=new e.Appacitive.HttpRequest;c.method="delete";c.url=e.Appacitive.config.apiBaseUrl;c.url+=e.Appacitive.storage.urlFactory.user.getUserDeleteUrl(d);c.onSuccess=function(c){c&&
c.code&&"200"==c.code?b(c):(c=c||{},c.message=c.message||"Server error",a(c))};c.onError=a;e.Appacitive.http.send(c)};this.createUser=function(d,b,a){var c=(new Appacitive.ArticleCollection({schema:"user"})).createNewArticle(d);c.save(function(){b(c)},a)};this.createUser1=function(d,b,a){b=b||function(){};a=a||function(){};d=d||{};d.__schematype="user";if(!d.username||!d.password)throw Error("Username and password are mandatory");var c=new e.Appacitive.HttpRequest;c.method="put";c.url=e.Appacitive.config.apiBaseUrl+
e.Appacitive.storage.urlFactory.user.getCreateUserUrl();c.data=d;c.onSuccess=function(c){c&&c.user?b(c.user):a((c||{}).status||"No response from APIs.")};c.onError=a;e.Appacitive.http.send(c)};this.authenticateUser=function(d,b,a){b=b||function(){};a=a||function(){};var c=new e.Appacitive.HttpRequest;c.method="post";c.url=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory.user.getAuthenticateUserUrl();c.data=d;c.onSuccess=function(c){c&&c.user?(f=c.user,b(c)):(c=c||{},a(c.status))};c.onError=
a;e.Appacitive.http.send(c)};this.authenticateWithFacebook=this.signupWithFacebook=function(d,b){d=d||function(){};b=b||function(){};FB.api("/me",function(){var a={accesstoken:Appacitive.facebook.accessToken,type:"facebook",expiry:3600,attempts:-1,createnew:!0},c=new Appacitive.HttpRequest;c.url=Appacitive.config.apiBaseUrl+Appacitive.storage.urlFactory.user.getAuthenticateUserUrl();c.method="post";c.data=a;c.onSuccess=function(a){a.user?(f=a.user,d(a)):b(a)};c.onError=function(){b()};Appacitive.http.send(c)})}}})(global);
(function(e){e.Appacitive.email=new function(){var f={username:null,from:null,frompassword:null,smtphost:"smtp.google.com",smtpport:587,enablessl:!0,replyto:null};this.getConfig=function(){return f};this.sendTemplatedEmail=function(){throw Error("Not implemented yet");};this.setupEmail=function(d){d=d||{};f.username=d.username||f.username;f.from=d.from||f.from;f.frompassword=d.frompassword||f.frompassword;f.smtphost=d.smtphost||f.smtphost;f.smtpport=d.smtpport||f.smtpport;f.enablessl=d.enablessl||
f.enablessl;f.replyto=d.replyto||f.replyto};this.sendRawEmail=function(d,b,a){b=b||function(){};a=a||function(){};if(!d||!d.to||!d.to.length||1!=d.to.length)throw Error("Atleast one receipient is mandatory to send an email");if(!d.subject)throw Error("Subject is mandatory to send an email");d={configuration:f,to:d.to||[],cc:d.cc||[],bcc:d.bcc||[],subject:d.subject||"Appacitive",body:{BodyText:d.body||"",IsBodyHTML:!0,__type:"RawBody"}};var c=new e.Appacitive.HttpRequest;c.url=e.Appacitive.config.apiBaseUrl+
Appacitive.storage.urlFactory.email.getSendEmailUrl();c.method="post";c.data=d;c.onSuccess=function(c){c&&c.status&&"200"==c.status.code?b(c.email):(c=c||{},c.status=c.status||{},a(c.status.message||"Server error"))};e.Appacitive.http.send(c)}}})(global);
(function(e){var f=function(){var d=require("facebook-node-sdk"),b=null;this.FB=null;this.initialize=function(a,b){if(!a)throw Error("Please provide appid");if(!b)throw Error("Please provide app secret");this.FB=new d({appId:a,secret:b})};this.requestLogin=function(a,c,d){this.FB?(b=accesstoken,FB.setAccessToken(a)):d("Intialize facebook with your appid and appsecret")};this.getCurrentUserInfo=function(a,c){this.FB&&b?(a=a||function(){},c=c||function(){},this.FB.api("/me",function(b,d){d?a(d):c("Access token is invalid")})):
c("Either intialize facebook with your appid and appsecret or set accesstoken")};this.__defineGetter__("accessToken",function(){return b});this.__defineSetter__("accessToken",function(a){console.log(a);b=a;this.FB&&this.FB.setAccessToken(a)});this.getProfilePictureUrl=function(a){return"https://graph.facebook.com/"+a+"/picture"}};e.Appacitive.facebook=e.Appacitive.runtime.isBrowser?new function(){var d=null;this.requestLogin=function(b,a){b=b||function(){};a=a||function(){};FB?FB.login(function(c){c.authResponse?
(d=c.authResponse.accessToken,b(c.authResponse)):a()},{scope:"email,user_birthday"}):a()};this.getCurrentUserInfo=function(b,a){b=b||function(){};a=a||function(){};FB.api("/me",function(c){c?b(c):a()})};this.__defineGetter__("accessToken",function(){return d});this.__defineSetter__("accessToken",function(b){d=b});this.getProfilePictureUrl=function(b){return"https://graph.facebook.com/"+b+"/picture"};this.logout=function(b,a){b=b||function(){};a=a||function(){};try{FB.logout(function(){b()})}catch(c){a(c.message)}}}:
new f})(global);
(function(e){e.Appacitive.push=new function(){this.send=function(f,d,b){d=d||function(){};b=b||function(){};if(!f)throw Error("Please specify push options");var a=new e.Appacitive.HttpRequest;a.url=e.Appacitive.config.apiBaseUrl+Appacitive.storage.urlFactory.push.getPushUrl();a.method="post";a.data=f;a.onSuccess=function(a){a&&a.status&&"200"==a.status.code?d(a.id):(a=a||{},a.status=a.status||{},b(a.status.message||"Server error"))};a.onError=function(a){b(a||"Server error")};e.Appacitive.http.send(a)};this.getNotification=
function(f,d,b){d=d||function(){};b=b||function(){};if(!f)throw Error("Please specify notification id");var a=new e.Appacitive.HttpRequest;a.url=e.Appacitive.config.apiBaseUrl+Appacitive.storage.urlFactory.push.getGetNotificationUrl(f);a.method="get";a.onSuccess=function(a){a&&a.status&&"200"==a.status.code?d(a.pushnotification):(a=a||{},a.status=a.status||{},b(a.status.message||"Server error"))};a.onError=function(a){b(a||"Server error")};e.Appacitive.http.send(a)};this.getAllNotifications=function(f,
d,b){d=d||function(){};b=b||function(){};f?(f.pnum=f.pnum||1,f.psize=f.psize||20):f={pnum:1,psize:20};var a=new e.Appacitive.HttpRequest;a.url=e.Appacitive.config.apiBaseUrl+Appacitive.storage.urlFactory.push.getGetAllNotificationsUrl(f);a.method="get";a.onSuccess=function(a){a&&a.status&&"200"==a.status.code?d(a.pushnotifications,a.paginginfo):(a=a||{},a.status=a.status||{},b(a.status.message||"Server error"))};a.onError=function(a){b(a||"Server error")};e.Appacitive.http.send(a)}}})(global);
"undefined"!=typeof module&&(module.exports=function(e){global.Appacitive.initialize({apikey:e});return global.Appacitive});