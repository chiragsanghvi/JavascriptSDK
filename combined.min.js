try{!Object.prototype.__defineGetter__&&Object.defineProperty({},"x",{get:function(){return!0}}).x&&(Object.defineProperty(Object.prototype,"__defineGetter__",{enumerable:!1,configurable:!0,value:function(e,c){Object.defineProperty(this,e,{get:c,enumerable:!0,configurable:!0})}}),Object.defineProperty(Object.prototype,"__defineSetter__",{enumerable:!1,configurable:!0,value:function(e,c){Object.defineProperty(this,e,{set:c,enumerable:!0,configurable:!0})}}))}catch(defPropException){}var global={};
(function(){global="undefined"==typeof window?process:window;global.Appacitive||(global.Appacitive={runtime:{isNode:"undefined"!=typeof process,isBrowser:"undefined"!=typeof window}});var e=function(a){if(!a||!a.send||"function"!=typeof a.send)throw Error("No applicable httpTransport class found");a.onResponse=this.onResponse;var d=[],b={},c=0,f={},e=0;this.addProcessor=function(a){if(a){a.pre=a.pre||function(){};a.post=a.post||function(){};var d=a.pre;c+=1;b[c]=d;a=a.post;e+=1;f[e]=a}};this.enqueueRequest=
function(a){d.push(a)};this.notify=function(){if(0!==d.length){var c=[],e;for(e in f)f.hasOwnProperty(e)&&c.push(f[e]);for(;0<d.length;){var h=d.shift(),k=[];for(e in b)b.hasOwnProperty(e)&&k.push(b[e](h));a.send(h,c,k)}}};this.onResponse=function(a){console.dir(a)}},c=function(){var a=function(){throw Error("Not Implemented Exception");};this.inOnline=this.send=a;this.onResponse=function(){a()};this.onError=function(){a()}},f=null,f=global.Appacitive.runtime.isBrowser?XMLHttpRequest:require("xmlhttprequest").XMLHttpRequest,
b=function(a,d){if("undefined"!==typeof XDomainRequest)throw Error("Appacitive doesn't support versions of IE6, IE7, IE8, IE9 due to crossdomain calls");if(!a.url)throw Error("Please specify request url");a.method||(a.method="GET");a.headers||(a.headers=[]);var b={};if(d)b=a.data;else try{a.data&&(b=a.data),b=JSON.stringify(b)}catch(c){}if(!a.onSuccess||"function"!=typeof a.onSuccess)a.onSuccess=function(){};if(!a.onError||"function"!=typeof a.onError)a.onError=function(){};var e=new f;e.onreadystatechange=
function(){if(4==this.readyState)if(200<=this.status&&300>this.status||304==this.status){var d=this.responseText;try{var b=this.getResponseHeader("content-type")||this.getResponseHeader("Content-Type");if("application/json"==b.toLowerCase()||"application/javascript"==b.toLowerCase())b=d,global.Appacitive.runtime.isBrowser||"{"!=b[0]&&(b=b.substr(1,b.length-1)),d=JSON.parse(b)}catch(c){}a.onSuccess(d,this)}else a.onError({code:this.status,message:this.statusText},this)};e.open(a.method,a.url,!0);for(var k=
0;k<a.headers.length;k+=1)e.setRequestHeader(a.headers[k].key,a.headers[k].value);global.Appacitive.runtime.isBrowser||e.setRequestHeader("User-Agent","Appacitive-NodeJSSDK");e.send(b);return e},a=function(){var a=new c;a.isOnline=function(){return!0};var d=function(d,c,f,e){e||d.headers.push({key:"content-type",value:"application/json"});new b({method:d.method,url:d.url,headers:d.headers,data:d.data,onSuccess:function(b){try{b=JSON.parse(b)}catch(e){}var j=b;if(c.length!=f.length)throw Error("Callback length and state length mismatch!");
for(var k=0;k<c.length;k+=1)c[k].apply({},[j,f[k]]);a.onResponse(b,d)},onError:function(b){a.onError(d,b)}})};a.send=function(a,b,c){"function"==typeof a.beforeSend&&a.beforeSend(a);d(a,b,c)};a.upload=function(a,b,c){"function"==typeof a.beforeSend&&a.beforeSend(a);d(a,b,c,!0)};return a};global.Appacitive.http=new function(){var d=new a,b=new e(d),c=!1;this.pause=function(){c=!0};this.unpause=function(){c=!1};this.addProcessor=function(a){var d=Error('Must provide a processor object with either a "pre" function or a "post" function.');
if(!a)throw d;if(!a.pre&&!a.post)throw d;b.addProcessor(a)};this.send=function(a){b.enqueueRequest(a);d.isOnline()&&!1==c&&b.notify()};this.flush=function(a){a?b.notify():d.isOnline()&&b.notify()};this.onError=function(a,d){if(a.onError)if(a.context)a.onError.apply(a.context,[d]);else a.onError(d)};d.onError=this.onError;this.onResponse=function(a,d){if(d.onSuccess)if(d.context)d.onSuccess.apply(d.context,[a]);else d.onSuccess(a)};d.onResponse=this.onResponse};global.Appacitive.HttpRequest=function(a){a=
a||{};this.url=a.url||"";this.data=a.data||{};this.headers=a.headers||[];this.method=a.method||"GET";this.onSuccess=a.onSuccess||function(){};this.onError=a.onError||function(){};this.send=function(a){return new b(this,a)}};var d=global;d.Appacitive&&d.Appacitive.http&&(d.Appacitive.http.addProcessor({pre:function(a){return a},post:function(a,b){try{d.Appacitive.Session.isSessionValid(a)?a&&(a.status&&a.status.code&&"8036"==a.status.code||a.code&&"8036"==a.code)?d.Appacitive.Users.logout(function(){},
!0):d.Appacitive.Session.incrementExpiry():(null!=d.Appacitive.Session.get()&&d.Appacitive.Session.resetSession(),d.Appacitive.http.send(b))}catch(c){}}}),d.Appacitive.http.addProcessor({pre:function(){return(new Date).getTime()},post:function(a,d){var b=(new Date).getTime()-d;a._timeTakenInMilliseconds=b}}))})();
(function(e){String.format=function(c,f){if(1>=arguments.length)return c;for(var b=arguments.length-2,a=0;a<=b;a++)c=c.replace(RegExp("\\{"+a+"\\}","gi"),arguments[a+1]);return c};String.prototype.toPascalCase=function(){return this.charAt(0).toUpperCase()+this.slice(1)};String.prototype.trimChar=function(c){var f=RegExp("^"+c),b=this;f.test(b)&&(b=b.slice(1,b.length));f=RegExp(c+"$");f.test(b)&&(b=b.slice(0,-1));return b};String.toSearchString=function(c){"undefined"==typeof c&&(c="");for(var f=
"",b=0;b<c.length;b+=1)-1==" .,;#".indexOf(c[b])&&(f+=c[b]);return f=f.toLowerCase()};String.contains=function(c,f){return-1!=c.indexOf(f)};String.startsWith=function(c,f){return 0==c.indexOf(f)};Array.distinct=function(c){var f=[],b=c.length,a,d,e;for(d=0;d<b;d++){a=void 0;for(e=0;e<f.length;e++)if(c[d].toLowerCase()===f[e].toLowerCase()){a=!0;break}a||f.push(c[d])}return f};e.dateFromWcf=function(c,f){var b=/Date\(([^)]+)\)/.exec(c);if(2!=b.length){if(!f)return s;throw Error(s+" is not .net json date.");
}return new Date(parseFloat(b[1]))};e.Appacitive.storage=e.Appacitive.storage||{};e.Appacitive.storage.urlFactory=new function(){e.Appacitive.bag=e.Appacitive.bag||{};this.email={emailServiceUrl:"email",getSendEmailUrl:function(){return String.format("{0}/send",this.emailServiceUrl)}};this.user={userServiceUrl:"user",getCreateUrl:function(){return String.format("{0}/create",this.userServiceUrl)},getAuthenticateUserUrl:function(){return String.format("{0}/authenticate",this.userServiceUrl)},getUserUrl:function(c){return String.format("{0}/{1}",
this.userServiceUrl,c)},getUpdateUrl:function(c){return String.format("{0}/{1}",this.userServiceUrl,c)},getDeleteUrl:function(c){return String.format("{0}/{1}",this.userServiceUrl,c)},getGetAllLinkedAccountsUrl:function(c){return String.format("{0}/{1}/linkedaccounts",this.userServiceUrl,c)},getValidateTokenUrl:function(c){return String.format("{0}/validate?userToken={1}",this.userServiceUrl,c)},getInvalidateTokenUrl:function(c){return String.format("{0}/invalidate?userToken={1}",this.userServiceUrl,
c)},getSendResetPasswordEmailUrl:function(){return String.format("{0}/sendresetpasswordemail",this.userServiceUrl)},getUpdatePasswordUrl:function(c){return String.format("{0}/{1}/changepassword",this.userServiceUrl,c)}};this.device={deviceServiceUrl:"device",getCreateUrl:function(){return String.format("{0}/register",this.deviceServiceUrl)},getUpdateUrl:function(c){return String.format("{0}/{1}",this.deviceServiceUrl,c)},getDeleteUrl:function(c){return String.format("{0}/{1}",this.deviceServiceUrl,
c)}};this.article={articleServiceUrl:"article",getSearchAllUrl:function(c,f,b){var a="",a=String.format("{0}/search/{1}/all",this.articleServiceUrl,c),a=b?a+"?psize="+b:a+"?psize=10";if("undefined"!==typeof f&&0<f.length)for(c=0;c<f.length;c+=1)0!=f[c].trim().length&&(a=a+"&"+f[c]);return a},getProjectionQueryUrl:function(){return String.format("{0}/search/project",this.articleServiceUrl)},getPropertiesSearchUrl:function(c,f){var b=String.format("{0}/search/{1}/all",this.articleServiceUrl,c);return b+
("?properties="+f)},getGetUrl:function(c,f){return String.format("{0}/{1}/{2}",this.articleServiceUrl,c,f)},getMultiGetUrl:function(c,f){return String.format("{0}/{1}/multiGet/{2}",this.articleServiceUrl,c,f)},getCreateUrl:function(c){return String.format("{0}/{1}",this.articleServiceUrl,c)},getUpdateUrl:function(c,f){return String.format("{0}/{1}/{2}",this.articleServiceUrl,c,f)},getDeleteUrl:function(c,f){return String.format("{0}/{1}/{2}",this.articleServiceUrl,c,f)},getMultiDeleteUrl:function(c){return String.format("{0}/{1}/bulkdelete",
this.articleServiceUrl,c)}};this.connection={connectionServiceUrl:"connection",getGetUrl:function(c,f){return String.format("{0}/{1}/{2}",this.connectionServiceUrl,c,f)},getMultiGetUrl:function(c,f){return String.format("{0}/{1}/multiGet/{2}",this.connectionServiceUrl,c,f)},getCreateUrl:function(c){return String.format("{0}/{1}",this.connectionServiceUrl,c)},getUpdateUrl:function(c,f){return String.format("{0}/{1}/{2}",this.connectionServiceUrl,c,f)},getDeleteUrl:function(c,f){return String.format("{0}/{1}/{2}",
this.connectionServiceUrl,c,f)},getMultiDeleteUrl:function(c){return String.format("{0}/{1}/bulkdelete",this.connectionServiceUrl,c)},getSearchByArticleUrl:function(c,f,b,a){var d="",d=String.format("{0}/{1}/find/all?label={2}&articleid={3}",this.connectionServiceUrl,c,b,f);if("undefined"!==typeof a&&0<a.length)for(c=0;c<a.length;c+=1)d=d+"&"+a[c];return d},getConnectedArticles:function(c,f,b){var a="",a=String.format("{0}/{1}/{2}/find",this.connectionServiceUrl,c,f);if(b&&b.length&&0<b.length)for(c=
0;c<b.length;c+=1)a=0==c?a+("?"+b[c]):a+("&"+b[c]);return a},getInterconnectsUrl:function(){var c="";return c=String.format("{0}/interconnects",this.connectionServiceUrl)},getPropertiesSearchUrl:function(c,f){var b=String.format("{0}/{1}/find/all",this.connectionServiceUrl,c);return b+("?properties="+f)}};this.cannedList={cannedListServiceUrl:"list",getGetListItemsUrl:function(c){return String.format("{0}/list/{1}/contents",this.cannedListServiceUrl,c)}};this.push={pushServiceUrl:"push",getPushUrl:function(){return String.format("{0}/",
this.pushServiceUrl)},getGetNotificationUrl:function(c){return String.format("{0}/notification/{1}",this.pushServiceUrl,c)},getGetAllNotificationsUrl:function(c){return String.format("{0}/getAll?psize={1}&pnum={2}",this.pushServiceUrl,c.psize,c.pnum)}};this.file={fileServiceUrl:"file",getUploadUrl:function(c){return String.format("{0}/uploadurl?contenttype={1}&expires=20",this.fileServiceUrl,escape(c))},getUpdateUrl:function(c,f){return String.format("{0}/updateurl/{1}?contenttype={2}&expires=20",
this.fileServiceUrl,c,escape(f))},getDownloadUrl:function(c,f){return String.format("{0}/download/{1}?expires={2}",this.fileServiceUrl,c,f)},getDeleteUrl:function(c){return String.format("{0}/delete/{1}",this.fileServiceUrl,c)}};this.query={params:function(c){var f=[];return""==location.search||-1==location.search.indexOf("?")?f:c?(c=c.toLowerCase(),location.search.split("?")[1].split("&").forEach(function(b,a){var d=a.split("="),e=d[1];2<d.length&&d.forEach(function(a){0==a||1==a||(e=e+"="+d[a])});
d[0].toLowerCase()==c&&(f=[d[0],e])}),f):location.search.split("?")[1].split("=")}}}})(global);
(function(e){e.Appacitive.eventManager=new function(){var c={};this.subscribe=function(f,b){if("string"!=typeof f||"function"!=typeof b)throw Error("Incorrect subscription call");"undefined"==typeof c[f]&&(c[f]=[]);var a;a=function(){return Math.floor(65536*Math.random()).toString(16)};a=a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a();c[f].push({callback:b,id:a});return a};this.unsubscribe=function(f){if(!f)return!1;var b=-1,a=null,d;for(d in c)for(var e=0;e<c[d].length;e+=1)if(c[d][e].id==f){b=e;
a=d;break}return-1!=b?(c[a].splice(b,1),!0):!1};this.fire=function(e,b,a){if("string"!=typeof e)throw Error("Incorrect fire call");if("undefined"==typeof a||null===a)a={};a.eventName=e;if("undefined"!=typeof c.all)for(var d=0;d<c.all.length;d+=1)c.all[d].callback(b,a);d=function(a,d,b){setTimeout(function(){a(d,b)},0)};if("undefined"!=typeof c[e])for(var g=0;g<c[e].length;g+=1)d(c[e][g].callback,b,a)};this.clearSubscriptions=function(e){if("string"!=typeof e)throw Error("Event Name must be string in EventManager.clearSubscriptions");
c[e]&&(c[e].length=0);return this};this.clearAndSubscribe=function(c,b){this.clearSubscriptions(c);this.subscribe(c,b)};this.dump=function(){console.dir(c)}}})(global);(function(e){e.Appacitive.config={apiBaseUrl:"https://apis.appacitive.com/"}})(global);
(function(e){e.Appacitive.Session=new function(){var c=function(){this.apikey="";this.isnonsliding=!1;this.usagecount=-1;this.windowtime=240},f=null,b=null,a=null,d=null,g=!1;this.useApiKey=!0;this.onSessionCreated=function(){};this.recreate=function(){e.Appacitive.Session.create(b)};this.create=function(d){b=d=d||{};var g=new c;d.apikey?(g.apikey=d.apikey||"",a=g.apikey):g.apikey=a;g.isnonsliding=d.isnonsliding||g.isnonsliding;g.usagecount=d.usagecount||g.usagecount;g.windowtime=d.windowtime||g.windowtime;
d=new e.Appacitive.HttpRequest;d.url=e.Appacitive.config.apiBaseUrl+"application.svc/session";d.method="put";d.data=g;d.onSuccess=function(a){a&&a.status&&"200"==a.status.code?(f=a.session.sessionkey,e.Appacitive.Session.useApiKey=!1,e.Appacitive.eventManager.fire("session.success",{},a),e.Appacitive.Session.onSessionCreated()):e.Appacitive.eventManager.fire("session.error",{},a)};e.Appacitive.http.send(d)};e.Appacitive.http.addProcessor({pre:function(b){e.Appacitive.Session.useApiKey?b.headers.push({key:"appacitive-apikey",
value:a}):b.headers.push({key:"appacitive-session",value:f});!0===g&&(1==b.headers.filter(function(a){return"appacitive-user-auth"==a.key}).length?b.headers.forEach(function(a){"appacitive-user-auth"==a.key&&(a.value=d)}):b.headers.push({key:"appacitive-user-auth",value:d}))}});this.setUserAuthHeader=function(a,b,c){try{a&&(g=!0,d=a,c||(b||(b=60),-1==b&&(b=null),e.Appacitive.runtime.isBrowser&&(e.Appacitive.Cookie.setCookie("Appacitive-UserToken",a,b),e.Appacitive.Cookie.setCookie("Appacitive-UserTokenExpiry",
b?b:-1,b))))}catch(f){}};this.incrementExpiry=function(){};this.removeUserAuthHeader=function(a,b){a&&("function"!=typeof a&&"boolean"==typeof a)&&(b=a,a=function(){});g=!1;a=a||function(){};e.Appacitive.localStorage.remove("Appacitive-User");e.Appacitive.runtime.isBrowser&&(e.Appacitive.Cookie.eraseCookie("Appacitive-UserToken"),e.Appacitive.Cookie.eraseCookie("Appacitive-UserTokenExpiry"));if(d&&!b)try{var c=new e.Appacitive.HttpRequest;c.url=e.Appacitive.config.apiBaseUrl+Appacitive.storage.urlFactory.user.getInvalidateTokenUrl(d);
d=null;c.method="POST";c.data={};c.onSuccess=function(){"function"==typeof a&&a()};e.Appacitive.http.send(c)}catch(f){}else d=null,"function"==typeof a&&a()};this.isSessionValid=function(a){if(!a)return!0;if(a.status){if(a.status.code&&("8027"==a.status.code||"8002"==a.status.code))return!1}else if(a.code&&("8027"==a.code||"8002"==a.code))return!1;return!0};this.resetSession=function(){f=null;this.useApiKey=!0};this.get=function(){return f};this.setSession=function(a){a&&(f=a,this.useApiKey=!1)};
this.setApiKey=function(d){d&&(a=d,this.useApiKey=!0)};var j="sandbox";this.__defineGetter__("environment",function(){return j});this.__defineSetter__("environment",function(a){"sandbox"!=a&&"live"!=a&&(a="sandbox");j=a})};e.Appacitive.initialize=function(c){e.Appacitive.Session.setApiKey(c.apikey||"");e.Appacitive.Session.environment=c.env||"";e.Appacitive.useApiKey=!0;if(c.userToken)-1==c.expiry?c.expiry=null:c.expiry||(c.expiry=3600),e.Appacitive.Session.setUserAuthHeader(c.userToken,c.expiry),
c.user&&(e.Appacitive.localStorage.set("Appacitive-User",c.user),e.Appacitive.Users.setCurrentUser(c.user));else if(e.Appacitive.runtime.isBrowser&&(c=e.Appacitive.Cookie.readCookie("Appacitive-UserToken"))){var f=e.Appacitive.Cookie.readCookie("Appacitive-UserTokenExpiry");f||(f=60);var b=e.Appacitive.localStorage.get("Appacitive-User");e.Appacitive.Users.setCurrentUser(b,c,f)}}})(global);
(function(e){e.Appacitive&&e.Appacitive.http&&e.Appacitive.http.addProcessor({pre:function(c){c.headers.push({key:"appacitive-environment",value:e.Appacitive.Session.environment})}})})(global);
(function(e){e.Appacitive.Queries={};var c=function(a){a=a||{};var d=1,b=200;this.__defineGetter__("pageNumber",function(){return d});this.__defineSetter__("pageNumber",function(a){d=a||1});this.__defineGetter__("pageSize",function(){return b});this.__defineSetter__("pageSize",function(a){b=a||200});this.pageNumber=a.pageNumber;this.pageSize=a.pageSize};c.prototype.toString=function(){return"psize="+this.pageSize+"&pnum="+this.pageNumber};var f=function(a){a=a||{};var d="__UtcLastUpdatedDate",b=!1;
this.__defineGetter__("orderBy",function(){return d});this.__defineSetter__("orderBy",function(a){d=a||"__UtcLastUpdatedDate"});this.__defineGetter__("isAscending",function(){return b});this.__defineSetter__("isAscending",function(a){b="undefined"==typeof a?!1:a});this.orderBy=a.orderBy;this.isAscending=a.isAscending};f.prototype.toString=function(){return"orderBy="+this.orderBy+"&isAsc="+this.isAscending};var b=function(a){var d=a||{},b="",e="",l="",h=a.queryType,m=new c(a),k=new f(a),n=a.schema||
a.relation,p=a.schema?"article":"connection";this.__defineGetter__("type",function(){return p});this.__defineGetter__("entityType",function(){return n});this.__defineGetter__("queryType",function(){return h});this.__defineGetter__("pageQuery",function(){return m});this.__defineGetter__("sortQuery",function(){return k});this.__defineGetter__("filter",function(){return b});this.__defineSetter__("filter",function(a){b=a});this.__defineGetter__("freeText",function(){return e});this.__defineSetter__("freeText",
function(a){"string"==typeof a?e=a:"object"==typeof a&&a.length&&(e=a.join(" "))});this.__defineGetter__("fields",function(){return l});this.__defineSetter__("fields",function(a){"string"==typeof a?l=a:"object"==typeof a&&a.length&&(l=a.join(","))});this.filter=d.filter||"";this.freeText=d.freeText||"";this.fields=d.fields||"";this.setFilter=function(a){this.filter=a};this.setFreeText=function(a){this.freeText=a};this.setFields=function(a){this.fields=a};this.extendOptions=function(a){for(var b in a)d[b]=
a[b];m=new c(d);k=new f(d)};this.getQueryString=function(){var a=this.pageQuery.toString()+"&"+this.sortQuery.toString();this.filter&&0<this.filter.trim().length&&(a+="&query="+this.filter);this.freeText&&0<this.freeText.trim().length&&(a+="&freetext="+this.freeText+"&language=en");this.fields&&0<this.fields.trim().length&&(a+="&fields="+this.fields);return a};this.getOptions=function(){var a={},d;for(d in this)this.hasOwnProperty(d)&&"function"!=typeof this[d]&&(a[d]=this[d]);return a}};e.Appacitive.Queries.BasicFilterQuery=
function(a){a=a||{};if(!a.schema&&!a.relation||a.schema&&a.relation)throw Error("Specify either schema or relation for basic filter query");a.queryType="BasicFilterQuery";a=new b(a);a.toRequest=function(){var a=new e.Appacitive.HttpRequest;a.url=this.toUrl();a.method="get";return a};a.toUrl=function(){return e.Appacitive.config.apiBaseUrl+this.type+".svc/"+this.entityType+"/find/all?"+this.getQueryString()};return a};e.Appacitive.Queries.ConnectedArticlesQuery=function(a){a=a||{};if(!a.relation)throw Error("Specify relation for connected articles query");
if(!a.articleId)throw Error("Specify articleId for connected articles query");a.schema&&delete a.schema;a.queryType="ConnectedArticlesQuery";var d=new b(a);d.articleId=a.articleId;d.relation=a.relation;d.label="";a.label&&("string"==typeof a.label&&0<a.label.length)&&(d.label="&label="+a.label);d.toRequest=function(){var a=new e.Appacitive.HttpRequest;a.url=this.toUrl();a.method="get";return a};d.toUrl=function(){return e.Appacitive.config.apiBaseUrl+"connection/"+this.relation+"/"+this.articleId+
"/find?"+this.getQueryString()+this.label};return d};e.Appacitive.Queries.GetConnectionsQuery=function(a){a=a||{};if(!a.relation)throw Error("Specify relation for GetConnectionsQuery query");if(!a.articleId)throw Error("Specify articleId for GetConnectionsQuery query");if(!a.label||0==a.label.trim().length)throw Error("Specify label for GetConnectionsQuery query");a.schema&&delete a.schema;a.queryType="GetConnectionsQuery";var d=new b(a);d.articleId=a.articleId;d.relation=a.relation;d.label=a.label;
d.toRequest=function(){var a=new e.Appacitive.HttpRequest;a.url=this.toUrl();a.method="get";return a};d.toUrl=function(){return e.Appacitive.config.apiBaseUrl+"connection/"+d.relation+"/find/all?articleid="+this.articleId+"&label="+this.label+d.getQueryString()};return d};e.Appacitive.Queries.GetConnectionsBetweenArticlesQuery=function(a,d){a=a||{};if(!a.articleAId||"string"!=typeof a.articleAId||0==a.articleAId.length)throw Error("Specify valid articleAId for GetConnectionsBetweenArticlesQuery query");
if(!a.articleBId||"string"!=typeof a.articleBId||0==a.articleBId.length)throw Error("Specify articleBId for GetConnectionsBetweenArticlesQuery query");a.schema&&delete a.schema;a.queryType=d||"GetConnectionsBetweenArticlesQuery";var c=new b(a);c.articleAId=a.articleAId;c.articleBId=a.articleBId;c.label="GetConnectionsBetweenArticlesForRelationQuery"==c.queryType&&a.label&&"string"==typeof a.label&&0<a.label.length?"&label="+a.label:"";c.relation=a.relation&&"string"==typeof a.relation&&0<a.relation.length?
a.relation+"/":"";c.toRequest=function(){var a=new e.Appacitive.HttpRequest;a.url=this.toUrl();a.method="get";return a};c.toUrl=function(){return e.Appacitive.config.apiBaseUrl+"connection/"+this.relation+"find/"+this.articleAId+"/"+this.articleBId+"?"+this.getQueryString()+this.label};return c};e.Appacitive.Queries.GetConnectionsBetweenArticlesForRelationQuery=function(a){a=a||{};if(!a.relation)throw Error("Specify relation for GetConnectionsBetweenArticlesForRelationQuery query");return new e.Appacitive.Queries.GetConnectionsBetweenArticlesQuery(a,
"GetConnectionsBetweenArticlesForRelationQuery")};e.Appacitive.Queries.InterconnectsQuery=function(a){a=a||{};if(!a.articleAId||"string"!=typeof a.articleAId||0==a.articleAId.length)throw Error("Specify valid articleAId for InterconnectsQuery query");if(!a.articleBIds||"object"!=typeof a.articleBIds||!(0<a.articleBIds.length))throw Error("Specify list of articleBIds for InterconnectsQuery query");a.schema&&delete a.schema;a.queryType="InterconnectsQuery";var d=new b(a);d.articleAId=a.articleAId;d.articleBIds=
a.articleBIds;d.toRequest=function(){var a=new e.Appacitive.HttpRequest;a.url=this.toUrl();a.method="post";a.data={article1id:this.articleAId,article2ids:this.articleBIds};return a};d.toUrl=function(){return e.Appacitive.config.apiBaseUrl+"connection/interconnects?"+this.getQueryString()};return d};e.Appacitive.Queries.GraphQuery=function(a){a=a||{};if(!a.graphQuery)throw Error("graphQuery object is mandatory");this.toRequest=function(){var d=new e.Appacitive.HttpRequest;d.url=e.Appacitive.config.apiBaseUrl;
d.url+=e.Appacitive.storage.urlFactory.article.getProjectionQueryUrl();d.method="post";d.data=a.graphQuery;return d}}})(global);
(function(e){e.Appacitive.BaseObject=function(c,f){var b={},a=c=c||{};if(f)for(var d in a)if("string"==typeof a[d]||"number"==typeof a[d])b[d]=a[d];else if("object"==typeof a[d]){b[d]=0<=a[d].length?[]:{};for(var g in a[d])b[d][g]=a[d][g]}else b[d]=obj[d];!b.__id&&c.__id&&(b.__id=c.__id);c.__schematype?(c.__schematype=c.__schematype.toLowerCase(),this.entityType=c.__schematype,this.type="user"==c.__schematype||"device"==c.__schematype?c.__schematype:"article"):c.__relationtype&&(c.__relationtype=
c.__relationtype.toLowerCase(),this.entityType=c.__relationtype,this.type="connection");var j=function(a){a=a||{};a.message=a.message||"Server error";a.code=a.code||"500"},l=function(d){for(var b in d)if("string"==typeof d[b])a[b]=d[b];else if("object"==typeof d[b]){a[b]=0<=d[b].length?[]:{};for(var c in d[b])a[b][c]=d[b][c]}else a[b]=d[b]};this.getObject=function(){return a};this.toJSON=function(){return a};this.attributes=function(){if(0===arguments.length)return a.__attributes||(a.__attributes=
{}),a.__attributes;if(1==arguments.length)return a.__attributes||(a.__attributes={}),a.__attributes[arguments[0]];if(2==arguments.length){if("string"!==typeof arguments[1])throw Error("only string values can be stored in attributes.");a.__attributes||(a.__attributes={});a.__attributes[arguments[0]]=arguments[1]}else throw Error(".attributes() called with an incorrect number of arguments. 0, 1, 2 are supported.");};this.aggregates=function(){var d={},b;for(b in a){if(!a.hasOwnProperty(b))return;"$"==
b[0]&&(d[b]=a[b])}if(0===arguments.length)return d;if(1==arguments.length)return d[arguments[0]];throw Error(".aggregates() called with an incorrect number of arguments. 0, and 1 are supported.");};var h=[];a.__tags||(a.__tags=[]);this.__defineGetter__("tags",function(){return!a.__tags?[]:a.__tags});this.addTags=function(d){d&&("string"==typeof d&&d.length)&&(a.__tags.push(d),a.__tags=Array.distinct(a.__tags),h&&h.length&&(d=h.indexOf(d),-1!=d&&h.splice(d,1)))};this.removeTags=function(d){d&&("string"==
typeof d&&d.length)&&(h.push(d),h=Array.distinct(h),a.__tags&&a.__tags.length&&(d=a.__tags.indexOf(d),-1!=d&&a.__tags.splice(d,1)))};this.get=function(d){if(d)return a[d]};this.set=function(d,b){if(!d||"string"!=typeof d||0==d.length)return b;null==b||"undefined"==b?a[d]=null:"string"==typeof b?a[d]=b:"number"==typeof b?a[d]=b+"":"object"==typeof b&&0<=b.length&&(a[d]=b);return b};this.copy=function(a){a&&l(a)};this.save=function(d,b){a.__id?k.apply(this,arguments):m.apply(this,arguments)};var m=
function(d,c){d=d||function(){};c=c||function(){};var f=this,g=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory[this.type].getCreateUrl(a.__schematype||a.__relationtype);if(a.__schematype&&("user"==a.__schematype.toLowerCase()||"device"==a.__schematype.toLowerCase()))g=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory[a.__schematype.toLowerCase()].getCreateUrl();var h=new e.Appacitive.HttpRequest;h.url=g;h.method="put";a.__revision&&delete a.__revision;h.data=a;h.onSuccess=
function(e){var g=null;if(e&&(e.article||e.connection||e.user||e.device))g=e.article||e.connection||e.user||e.device;e&&g?(b=g,a.__id=g.__id,l(g),f.connectionCollections&&0<f.connectionCollections.length&&f.connectionCollections.forEach(function(d){d.getQuery().extendOptions({articleId:a.__id})}),"connection"==f.type&&f.parseConnection(),Appacitive.eventManager.fire((f.__schematype||f.__relationtype)+"."+f.type+".created","base",{object:f}),"function"==typeof d&&d(f)):(e=e||{},e.status=e.status||
{},e.status=j(e.status),Appacitive.eventManager.fire((f.__schematype||f.__relationtype)+"."+f.type+".createFailed","base",{error:e.status}),"function"==typeof c&&c(e.status,f))};h.onError=function(a){a=j(a);"function"==typeof c&&c(a,f)};e.Appacitive.http.send(h)},k=function(d,c){d=d||function(){};c=c||function(){};var f=!1,g=JSON.parse(JSON.stringify(b)),m;for(m in a)"undefined"==typeof a[m]||null===a[m]?(g[m]=null,f=!0):a[m]!=b[m]?(g[m]=a[m],f=!0):a[m]==b[m]&&delete g[m];try{g.__revision&&delete g.__revision,
g.__endpointa&&delete g.__endpointa,g.__endpointb&&delete g.__endpointb,g.__createdby&&delete g.__createdby,g.__lastmodifiedby&&delete g.__lastmodifiedby,g.__schematype&&delete g.__schematype,g.__relationtype&&delete g.__relationtype,g.__utcdatecreated&&delete g.__utcdatecreated,g.__utclastupdateddate&&delete g.__utclastupdateddate,g.__tags&&delete g.__tags}catch(k){}a.__tags&&0<a.__tags.length&&(g.__addtags=a.__tags);h&&0<h.length&&(g.__removetags=h);var q=this;if(f){f=new e.Appacitive.HttpRequest;
m=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory[this.type].getUpdateUrl(a.__schematype||a.__relationtype,b.__id?b.__id:a.__id);if(a&&a.__schematype&&("user"==a.__schematype.toLowerCase()||"device"==a.__schematype.toLowerCase()))m=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory[a.__schematype.toLowerCase()].getUpdateUrl(b.__id);f.url=m;f.method="post";f.data=g;f.onSuccess=function(e){e&&(e.article||e.connection||e.user||e.device)?(b=e.article||e.connection||e.user||
e.device,l(b),Appacitive.eventManager.fire(q.type+"."+a.__id+".updated","base",{object:q}),"function"==typeof d&&d(q)):(e=e||{},e.status=e.status||{},e.status=j(e.status),Appacitive.eventManager.fire(q.type+"."+a.__id+".updateFailed","base",{object:e.status}),"function"==typeof c&&c(e.status,q))};f.onError=function(a){a=a||{};a.message=a.message||"Server error";a.code=a.code||"500";"function"==typeof c&&c(a,q)};e.Appacitive.http.send(f)}else"function"==typeof d&&d(q)};this.fetch=function(d,c){d=d||
function(){};c=c||function(){};if(a.__id){var f=this,g=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory[this.type].getGetUrl(a.__schematype||a.__relationtype,a.__id),h=new e.Appacitive.HttpRequest;h.url=g;h.method="get";h.onSuccess=function(a){a&&(a.article||a.connection||a.user||a.device)?(b=a.article||a.connection||a.user||a.device,l(b),f.___collection&&"article"==f.___collection.collectionType&&f.___collection.addToCollection(f),"function"==typeof d&&d(f)):(a=a||{},a.status=a.status||
{},a.status=j(a),"function"==typeof c&&c(a.status,f))};h.onError=function(a){a=j(a);"function"==typeof c&&c(a,f)};e.Appacitive.http.send(h)}else"function"==typeof c&&c({code:"400",message:"Please specify id for get operation"},this)};this.del=function(d,b,c){if(!a.__id&&this.___collection)this.___collection.removeByCId(this.__cid),"function"==typeof d&&d(this);else{d=d||function(){};b=b||function(){};c=c||{};var f=this,g=e.Appacitive.config.apiBaseUrl,g=g+e.Appacitive.storage.urlFactory[this.type].getDeleteUrl(a.__schematype||
a.__relationtype,a.__id);if(a&&a.__schematype&&("user"==a.__schematype.toLowerCase()||"device"==a.__schematype.toLowerCase()))g=e.Appacitive.config.apiBaseUrl,g+=e.Appacitive.storage.urlFactory[a.__schematype.toLowerCase()].getDeleteUrl(a.__id);c.deleteConnections&&!0===c.deleteConnections&&(g=-1==g.indexOf("?")?g+"?deleteconnections=true":g+"&deleteconnections=true");c=new e.Appacitive.HttpRequest;c.url=g;c.method="delete";c.onSuccess=function(c){"200"==c.code?(f.___collection&&f.___collection.removeById(a.__id),
"function"==typeof d&&d(c)):(c=j(c),"function"==typeof b&&b(c,f))};c.onError=function(a){a=j(a);"function"==typeof b&&b(a,f)};e.Appacitive.http.send(c)}}};e.Appacitive.BaseObject.prototype.toString=function(){return JSON.stringify(this.getObject())}})(global);
(function(e){var c=function(){return Math.floor(65536*Math.random()).toString(16)};e.Appacitive.GUID=function(){var e=c()+c()+"-"+c()+"-"+c()+"-"+c()+"-"+c()+c()+c(),b="",a,d,g,j,l,h,m=0,e=e.replace(/\r\n/g,"\n");d="";for(g=0;g<e.length;g++)j=e.charCodeAt(g),128>j?d+=String.fromCharCode(j):(127<j&&2048>j?d+=String.fromCharCode(j>>6|192):(d+=String.fromCharCode(j>>12|224),d+=String.fromCharCode(j>>6&63|128)),d+=String.fromCharCode(j&63|128));for(e=d;m<e.length;)a=e.charCodeAt(m++),d=e.charCodeAt(m++),
g=e.charCodeAt(m++),j=a>>2,a=(a&3)<<4|d>>4,l=(d&15)<<2|g>>6,h=g&63,isNaN(d)?l=h=64:isNaN(g)&&(h=64),b=b+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(j)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h);return b.toString()}})(global);
(function(e){e.Appacitive.ArticleCollection=function(c){var f=null,b=null,a=[],d=c;this.collectionType="article";if(!c||!c.schema)throw Error("Must provide schema while initializing ArticleCollection.");var f=c.schema,g=this,j=function(a){a.type="article";a.schema?f=a.schema:a.schema=f;b=new e.Appacitive.Queries.BasicFilterQuery(a);d=a;g.extendOptions=b.extendOptions};this.setFilter=function(a){d.filter=a;d.type="article";b?b.filter=a:(b=new e.Appacitive.Queries.BasicFilterQuery(d),g.extendOptions=
b.extendOptions)};this.setFreeText=function(a){!a&&0==a.trim().length&&(d.freeText="");d.freeText=a;d.type="article";b?b.freeText=a:(b=new e.Appacitive.Queries.BasicFilterQuery(d),g.extendOptions=b.extendOptions)};this.setFields=function(a){a||(d.fields="");d.fields=a;d.type="article";b?b.fields=a:(b=new e.Appacitive.Queries.BasicFilterQuery(d),g.extendOptions=b.extendOptions)};this.reset=function(){f=d=null;a.length=0;b=null};this.__defineGetter__("query",function(){return b});this.getQuery=function(){return b};
var l=["BasicFilterQuery"];this.__defineSetter__("query",function(d){if(!d||!d.toRequest)throw Error("Invalid  appacitive query passed to articleCollection");if(-1==l.indexOf(d.queryType))throw Error("ArticleCollection only accepts "+l.join(", "));a.length=0;b=d});this.setQuery=function(a){this.query=a};this.setOptions=j;j(c);this.get=function(d){if(d!=parseInt(d,10))return null;d=parseInt(d,10);return"number"!=typeof d||d>=a.length?null:a.slice(d,d+1)[0]};this.addToCollection=function(d){if(!d||
d.get("__schematype")!=f)throw Error("Null article passed or schema type mismatch");var b=null;a.forEach(function(a,c){a.get("__id")==d.get("__id")&&(b=c)});0!=b?a.splice(b,1):a.push(d)};this.getArticleById=function(d,b,c){b=b||function(){};c=c||function(){};var e=a.filter(function(a){return a.get("__id")==d});1==e.length?b(Array.prototype.slice.call(e)[0]):c()};this.getAll=function(){return Array.prototype.slice.call(a)};this.getAllArticles=function(){return Array.prototype.slice.call(a).map(function(a){return a.getArticle()})};
this.removeById=function(d){if(!d)return!1;var b=null;a.forEach(function(a,c){a.getArticle().__id&&a.getArticle().__id==d&&(b=c)});return null!==b?(a.splice(b,1),!0):!1};this.removeByCId=function(d){if(!d)return!1;var b=null;a.forEach(function(a,c){a.__cid&&a.__cid==d&&(b=c)});return null!==b?(a.splice(b,1),!0):!1};this.fetch=function(d,c){d=d||function(){};c=c||function(){};a.length=0;var f=b.toRequest();f.onSuccess=function(b){var f=d,j=b.articles;if(j){if(!j.length||0===j.length)j=[];j.forEach(function(d){d=
new e.Appacitive.Article(d,!0);d.___collection=g;a.push(d)});f(b.paginginfo||{})}else c(b.status)};e.Appacitive.http.send(f)};this.fetchByPageNumber=function(a,d,c){b.getOptions().pageQuery.pageNumber=c;this.fetch(a,d)};this.fetchNextPage=function(a,d){b.getOptions().pageQuery.pageNumber+=1;this.fetch(a,d)};this.fetchPreviousPage=function(a,d){var c=b.getOptions().pageQuery;c.pageNumber-=1;0===c.pageNumber&&(c.pageNumber=1);this.fetch(a,d)};this.createNewArticle=function(d){d=d||{};d.__schematype=
f;d=new e.Appacitive.Article(d);d.___collection=g;d.__cid=parseInt(1E6*Math.random(),10);a.push(d);return d};this.map=function(){return a.map.apply(this,arguments)};this.forEach=function(){return a.forEach.apply(this,arguments)};this.filter=function(){return a.filter.apply(this,arguments)}};e.Appacitive.ArticleCollection.prototype.toString=function(){return JSON.stringify(this.getAllArticles())};e.Appacitive.ArticleCollection.prototype.toJSON=function(){return this.getAllArticles()};e.Appacitive.ArticleCollection.prototype.__defineGetter__("articles",
function(){return this.getAll()})})(global);
(function(e){e.Appacitive.ConnectionCollection=function(c){var f=null,b=null,a=[],d=[],g=c;this.collectionType="connection";if(!c||!c.relation)throw Error("Must provide relation while initializing ConnectionCollection.");var f=c.relation,j=function(a){a.type="connection";a.relation?f=a.relation:a.relation=f;b=new e.Appacitive.Queries.BasicFilterQuery(a);g=a};this.setFilter=function(a){g.filter=a;g.type="connection";b?b.filter=a:(b=new e.Appacitive.Queries.BasicFilterQuery(g),h.extendOptions=b.extendOptions)};
this.setFreeText=function(a){!a&&0==a.trim().length&&(g.freeText="");g.freeText=a;g.type="connection";b?b.freeText=a:(b=new e.Appacitive.Queries.BasicFilterQuery(g),h.extendOptions=b.extendOptions)};this.setFields=function(a){a||(g.fields="");g.fields=a;g.type="connection";b?b.fields=a:(b=new e.Appacitive.Queries.BasicFilterQuery(g),h.extendOptions=b.extendOptions)};this.__defineGetter__("query",function(){return b});this.getQuery=function(){return b};var l=["BasicFilterQuery","ConnectedArticlesQuery",
"GetConnectionsQuery","GetConnectionsBetweenArticlesForRelationQuery"];this.__defineSetter__("query",function(c){if(!c||!c.toRequest)throw Error("Invalid  appacitive query passed to connectionCollection");if(-1==l.indexOf(c.queryType))throw Error("ConnectionCollection only accepts "+l.join(", "));d.length=0;a.length=0;b=c});this.setQuery=function(a){this.query=a};this.reset=function(){f=g=null;d.length=0;a.length=0;b=null};this.setOptions=j;j(c);this.get=function(d){if(d!=parseInt(d,10))return null;
d=parseInt(d,10);return"number"!=typeof d||d>=a.length?null:a.slice(d,d+1)[0]};this.addToCollection=function(d){if(!d||d.get("__relationtype")!=f)throw Error("Null connection passed or relation type mismatch");var b=null;a.forEach(function(a,c){a.get("__id")==d.get("__id")&&(b=c)});null!==b?a.splice(b,1):a.push(d)};this.getConnection=function(d,b,c){b=b||function(){};c=c||function(){};var e=a.filter(function(a){return a.get("__id")==d});1==e.length?b(Array.prototype.slice.call(e)[0]):c()};this.getAll=
function(){return Array.prototype.slice.call(a)};this.getAllConnections=function(){return Array.prototype.slice.call(a).map(function(a){return a.getConnection()})};this.removeById=function(d){if(!d)return!1;var b=null;a.forEach(function(a,c){a.getConnection().__id&&a.getConnection().__id==d&&(b=c)});return null!==b?(a.splice(b,1),!0):!1};this.removeByCId=function(d){if(!d)return!1;var b=null;a.forEach(function(a,c){a.__cid&&a.__cid==d&&(b=c)});return null!==b?(a.splice(b,1),!0):!1};var h=this;this.getConnectedArticle=
function(a){if(!d||0===d.length)return null;var b=d.filter(function(d){return d.get("__id")==a});return 0<b.length?b[0]:null};this.fetch=function(c,f){c=c||function(){};f=f||function(){};a.length=0;var g=b.toRequest();g.onSuccess=function(g){a:{var j=c;g=g||{};var l=g.connections;"GetConnectionsBetweenArticlesForRelationQuery"==b.queryType&&g.connection&&(l=[g.connection]);if(!l)if(g.status&&g.status.code&&"200"==g.status.code)l=[];else{f(g.status);break a}if(!l.length||0===l.length)l=[];l.forEach(function(b){b=
new e.Appacitive.Connection(b,!0);b.___collection=h;if(b.endpointA.article||b.endpointB.article){var c=b.endpointA.article||b.endpointB.article;c.___collection=h;d.push(c)}try{b.___collection.connectedArticle||delete b.connectedArticle}catch(f){}a.push(b)});j(g.paginginfo||{})}};e.Appacitive.http.send(g)};this.fetchByPageNumber=function(a,d,c){b.getOptions().pageQuery.pageNumber=c;this.fetch(a,d)};this.fetchNextPage=function(a,d){b.getOptions().pageQuery.pageNumber+=1;this.fetch(a,d)};this.fetchPreviousPage=
function(a,d){var c=b.getOptions().pageQuery;c.pageNumber-=1;0===c.pageNumber&&(c.pageNumber=1);this.fetch(a,d)};this.createNewConnection=function(d){d=d||{};d.__relationtype=f;d=new e.Appacitive.Connection(d);d.___collection=h;d.__cid=parseInt(1E6*Math.random(),10);a.push(d);return d};this.map=function(){return a.map.apply(this,arguments)};this.forEach=function(d,b){return a.forEach(d,b||this)};this.filter=function(){return a.filter.apply(this,arguments)}}})(global);
(function(e){var c=function(c,b){c=c||function(){};b=b||function(){};var a=new e.Appacitive.HttpRequest;a.method="get";a.url=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory.user.getGetAllLinkedAccountsUrl(this.get("__id"));a.onSuccess=function(a){var e=null;a&&(a.identities&&0<a.identities.length)&&(a=a.identities.filter(function(a){return"facebook"==a.authtype.toLowerCase()}),1==a.length&&(e=a[0].username));null!==e?FB.api("/"+e,function(a){a?c(a):b()}):b()};a.onError=function(){b()};
e.Appacitive.http.send(a)};e.Appacitive.Article=function(f,b){if(!f.__schematype&&!f.schema)throw new error("Cannot set article without __schematype");f.schema&&(f.__schematype=f.schema,delete f.schema);var a=new e.Appacitive.BaseObject(f,b);a.type="article";a.connectionCollections=[];a.getArticle=a.getObject;a.get("__schematype")&&"user"==a.get("__schematype").toLowerCase()&&(a.getFacebookProfile=c);a.getConnectedArticles=function(a){if("article"!=this.type)return null;a=a||{};a.articleId=this.get("__id");
var b=new e.Appacitive.ConnectionCollection({relation:a.relation});b.connectedArticle=this;this.connectionCollections.push(b);b.query=new e.Appacitive.Queries.ConnectedArticlesQuery(a);return b};a.getConnections=function(a){if("article"!=this.type)return null;a=a||{};a.articleId=this.get("__id");var b=new e.Appacitive.ConnectionCollection({relation:a.relation});this.connectionCollections.push(b);b.query=new e.Appacitive.Queries.GetConnectionsQuery(a);return b};return a};e.Appacitive.Article.multiDelete=
function(c,b,a,d){if(!c)throw Error("Specify schemaName");if("user"==c.toLowerCase()||"device"==c.toLowerCase())throw Error("Cannot delete user and devices using multidelete");if(0<b.length){a=a||function(){};d=d||function(){};var g=new e.Appacitive.HttpRequest;g.url=e.Appacitive.config.apiBaseUrl+Appacitive.storage.urlFactory.article.getMultiDeleteUrl(c);g.method="post";g.data={idlist:b};g.onSuccess=function(b){b&&"200"==b.code?"function"==typeof a&&a():(b=b||{},"function"==typeof d&&d(b.status||
{message:"Server error",code:400}))};g.onError=function(a){a=a||{};"function"==typeof d&&d(a.status||{message:"Server error",code:400})};e.Appacitive.http.send(g)}else a()};e.Appacitive.Article.multiGet=function(c,b,a,d){if(!c)throw Error("Specify schemaName");if("user"==c.toLowerCase()||"device"==c.toLowerCase())throw Error("Cannot multiget user and devices using multidelete");if("object"==typeof b&&0<b.length){var g=new e.Appacitive.HttpRequest;g.url=e.Appacitive.config.apiBaseUrl+Appacitive.storage.urlFactory.article.getMultiGetUrl(c,
b.join(","));g.method="get";g.onSuccess=function(b){if(b&&b.articles){if("function"==typeof a){var c=[];b.articles.forEach(function(a){c.push(new e.Appacitive.Article(a))});a(c,b.paginginfo)}}else b=b||{},"function"==typeof d&&d(b.status||{message:"Server error",code:400})};g.onError=function(a){a=a||{};"function"==typeof d&&d(a.status||{message:"Server error",code:400})};e.Appacitive.http.send(g)}else a([])}})(global);
(function(e){var c=function(a,d,b){var c={label:a.label};a.articleid&&(c.articleid=a.articleid);if(a.article)"function"==typeof a.article.getArticle?a.article.get("__id")?c.articleid=a.article.get("__id"):c.article=a.article.getArticle():"object"==typeof a.article&&a.article.__schematype&&(a.article.__id?c.articleid=a.article.__id:c.article=a.article,a.article=new Appacitive.Article(a.article));else if(!c.articleid&&!c.article)throw Error("Incorrectly configured endpoints provided to setupConnection");
b["endpoint"+d]=a;return c},f=function(a,d,b){b.get("__endpoint"+d.toLowerCase()).article&&"object"==typeof b.get("__endpoint"+d.toLowerCase()).article?(b["endpoint"+d]?b["endpoint"+d]&&b["endpoint"+d].article&&b["endpoint"+d].article.getArticle?b["endpoint"+d].article.copy(b.get("__endpointb").article):b["endpoint"+d].article=new e.Appacitive.Article(b.get("__endpoint"+d.toLowerCase()).article):(b["endpoint"+d]={},b["endpoint"+d].article=new e.Appacitive.Article(b.get("__endpoint"+d.toLowerCase()).article)),
b["endpoint"+d].articleid=b.get("__endpoint"+d.toLowerCase()).articleid,b["endpoint"+d].label=b.get("__endpoint"+d.toLowerCase()).label,b["endpoint"+d].type=b.get("__endpoint"+d.toLowerCase()).type,b["endpoint"+d].article.___collection=b.___collection,delete b.get("__endpoint"+d.toLowerCase()).article):b["endpoint"+d]=b.get("__endpoint"+d.toLowerCase())};e.Appacitive.Connection=function(a,d){if(!a.__relationtype&&!a.relation)throw new error("Cannot set connection without relation");a.relation&&(a.__relationtype=
a.relation,delete a.relation);a.endpoints&&2==a.endpoints.length&&(a.__endpointa=a.endpoints[0],a.__endpointb=a.endpoints[1],delete a.endpoints);var b=new e.Appacitive.BaseObject(a);b.type="connection";b.getConnection=b.getObject;b.setupConnection=function(a,d){if(!a||!a.articleid&&!a.article||!a.label||!d||!d.articleid&&!d.article||!d.label)throw Error("Incorrect endpoints configuration passed.");b.set("__endpointa",c(a,"A",b));b.set("__endpointb",c(d,"B",b))};b.parseConnection=function(){var d=
"A",c="B";a.__endpointa.label==this.get("__endpointb").label&&a.__endpointa.articleid==this.get("__endpointb").articleid&&(d="B",c="A");f(this.get("__endpointa"),d,b);f(this.get("__endpointb"),c,b);b.__defineGetter__("endpoints",function(){var a=[];a.push(this.endpointA);a.push(this.endpointB);return a});return b};d?(b.__defineGetter__("connectedArticle",function(){if(!b.___collection.connectedArticle)throw Error("connectedArticle can be accessed only by using the getConnectedArticles call");var a=
b.___collection.connectedArticle.get("__id");if(!a)return null;var d=b.getConnection().__endpointa.articleid;b.getConnection().__endpointa.articleid==a&&(d=b.getConnection().__endpointb.articleid);return b.___collection.getConnectedArticle(d)}),b.parseConnection()):a.__endpointa&&a.__endpointb&&b.setupConnection(b.get("__endpointa"),b.get("__endpointb"));return b};e.Appacitive.Connection.multiDelete=function(a,d,b,c){if(!a||"string"!=typeof a||0==a.length)throw Error("Specify relationName");if(0<
d.length){var f=new e.Appacitive.HttpRequest;f.url=e.Appacitive.config.apiBaseUrl+Appacitive.storage.urlFactory.connection.getMultiDeleteUrl(a);f.method="post";f.data={idlist:d};f.onSuccess=function(a){a&&"200"==a.code?b():(a=a||{},c(a||{message:"Server error",code:400}))};f.onError=function(a){a=a||{};c(a||{message:"Server error",code:400})};e.Appacitive.http.send(f)}else b()};var b=function(a,d,b){a.onSuccess=function(a){if(a&&a.status&&"200"==a.status.code){if("function"==typeof d){var c=a.connections,
f=[];c||(c=[]);c.forEach(function(a){f.push(new e.Appacitive.Connection(a))});d(f,a.paginginfo)}}else a=a||{},"function"==typeof b&&b(a.status||{message:"Server error",code:400})};a.onError=function(a){a=a||{};"function"==typeof b&&b(a.status||{message:"Server error",code:400})};e.Appacitive.http.send(a)};e.Appacitive.Connection.multiGet=function(a,d,c,f){if(!a||"string"!=typeof a||0==a.length)throw Error("Specify relationName");if(!d||"object"!==typeof d||!(0<d.length))throw Error("Specify list of ids for multiget");
var l=new e.Appacitive.HttpRequest;l.url=e.Appacitive.config.apiBaseUrl+Appacitive.storage.urlFactory.connection.getMultiGetUrl(a,d.join(","));l.method="get";b(l,c,f)};e.Appacitive.Connection.getInterconnects=function(a,d,c,e){a=(new Appacitive.Queries.InterconnectsQuery({articleAId:a,articleBIds:d})).toRequest();b(a,c,e)};e.Appacitive.Connection.getBetweenArticles=function(a,d,c,e){a=(new Appacitive.Queries.GetConnectionsBetweenArticlesQuery({articleAId:a,articleBId:d})).toRequest();b(a,c,e)};e.Appacitive.Connection.getBetweenArticlesForRelation=
function(a,d,b,c,f){a=(new Appacitive.Queries.GetConnectionsBetweenArticlesForRelationQuery({articleAId:a,articleBId:d,relation:b})).toRequest();a.onSuccess=function(a){a&&a.status&&"200"==a.status.code?"function"==typeof c&&(a=a.connection?new e.Appacitive.Connection(a.connection):null,c(a)):(a=a||{},"function"==typeof f&&f(a.status||{message:"Server error",code:400}))};a.onError=function(a){a=a||{};"function"==typeof f&&f(a.status||{message:"Server error",code:400})};e.Appacitive.http.send(a)}})(global);
(function(e){e.Appacitive.Users=new function(){var c=null;this.__defineGetter__("currentUser",function(){return c});this.setCurrentUser=function(f,b,a){if(!f||"object"!=typeof f)throw Error("Cannot set null object as user");var d=f;f.getArticle||(d=new e.Appacitive.User(f));if(!d.get("__id")||0==d.get("__id").length)throw Error("Specify user __id");e.Appacitive.localStorage.set("Appacitive-User",f);a||(a=60);c=d;b&&e.Appacitive.Session.setUserAuthHeader(b,a);c.logout=function(a){e.Appacitive.Users.logout(a)};
c.updatePassword=function(a,d,b,c){var f=this.get("__id"),k=b,n=c;if(!f||"string"!==typeof f||0==f.length)throw Error("Please specify valid userid");if(!a||"string"!==typeof a||0==a.length)throw Error("Please specify valid oldPassword");if(!d||"string"!==typeof d||0==d.length)throw Error("Please specify valid newPassword");k=k||function(){};n=n||function(){};a==d?"function"==typeof k&&k():(a={oldpassword:a,newpassword:d},d=new e.Appacitive.HttpRequest,d.url=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory.user.getUpdatePasswordUrl(f),
d.method="post",d.data=a,d.onSuccess=function(a){a&&"200"==a.code&&("function"==typeof k?k():n(a))},d.onError=n,e.Appacitive.http.send(d))};e.Appacitive.eventManager.clearAndSubscribe("user."+d.get("__id")+".updated",function(a,d){e.Appacitive.localStorage.set("Appacitive-User",d.object.getArticle())})};e.Appacitive.User=function(c){c.__schematype="user";return new e.Appacitive.Article(c,!0)};this.deleteUser=function(c,b,a){if(!c)throw Error("Specify userid for user delete");(new e.Appacitive.Article({__schematype:"user",
__id:c})).del(b||function(){},a||function(){})};this.deleteCurrentUser=function(f,b){f=f||function(){};if(null===c)throw Error("Current user is not yet set for delete operation");var a=c.get("__id");this.deleteUser(a,function(a){e.Appacitive.Session.removeUserAuthHeader();"function"==typeof f&&f(a)},b)};this.createUser=this.createNewUser=function(c,b,a){c=c||{};c.__schematype="user";if(!c.username||!c.password||!c.firstname||0==c.username.length||0==c.password.length||0==c.firstname.length)throw Error("username, password and firstname are mandatory");
var d=new e.Appacitive.Article(c);c.type="user";d.save(b,a)};this.signup=function(c,b,a){var d=this;this.createUser(c,function(){d.login(c.username,c.password,b,a)},function(d){a(d)})};this.authenticateUser=function(c,b,a){b=b||function(){};a=a||function(){};c.expiry||(c.expiry=864E5);var d=this,g=new e.Appacitive.HttpRequest;g.method="post";g.url=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory.user.getAuthenticateUserUrl();g.data=c;g.onSuccess=function(e){e&&e.user?(d.setCurrentUser(e.user,
e.token,c.expiry),b({user:d.currentUser,token:e.token})):(e=e||{},a(e.status))};g.onError=a;e.Appacitive.http.send(g)};this.login=function(c,b,a,d){if(!c||!b||0==c.length||0==b.length)throw Error("Please specify username and password");this.authenticateUser({username:c,password:b,expiry:864E5},a||function(){},d||function(){})};this.authenticateWithFacebook=this.signupWithFacebook=function(c,b){c=c||function(){};b=b||function(){};var a=this;FB?FB.api("/me",function(){var d={accesstoken:e.Appacitive.facebook.accessToken,
type:"facebook",expiry:864E5,createnew:!0},g=new e.Appacitive.HttpRequest;g.url=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory.user.getAuthenticateUserUrl();g.method="post";g.data=d;g.onSuccess=function(d){d.user?(a.setCurrentUser(d.user,d.token,120),c({user:a.currentUser,token:d.token})):(data=data||{},b(data))};g.onError=b;e.Appacitive.http.send(g)}):b()};this.validateCurrentUser=function(c,b){c&&("function"!=typeof c&&"boolean"==typeof c)&&(b=c,c=function(){});var a=e.Appacitive.Cookie.readCookie("Appacitive-UserToken");
if(!a)return"function"==typeof c&&c(!1),!1;if(b)return"function"==typeof c&&c(!0),!0;try{var d=new e.Appacitive.HttpRequest;d.url=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory.user.getValidateTokenUrl(a);d.method="POST";d.data={};d.onSuccess=function(a){"function"==typeof c&&c(a.result)};e.Appacitive.http.send(d)}catch(g){c(!1)}};this.sendResetPasswordEmail=function(c,b,a,d){a=a||function(){};d=d||function(){};if(!c||"string"!=typeof c||0==c.length)throw Error("Please specify valid username");
if(b&&"string"==typeof b&&0==b.length)throw Error("Plase specify subject for email");c={username:c,subject:b};b=new e.Appacitive.HttpRequest;b.url=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory.user.getSendResetPasswordEmailUrl();b.method="post";b.data=c;b.onSuccess=function(b){b&&"200"==b.code&&("function"==typeof a?a():d(b))};b.onError=d;e.Appacitive.http.send(b)};this.logout=function(f,b){c=null;e.Appacitive.Session.removeUserAuthHeader(f||function(){},b)}}})(global);
(function(e){e.Appacitive.Email=new function(){var c={smtp:{username:null,password:null,host:"smtp.gmail.com",port:465,enablessl:!0},from:null,replyto:null};this.getConfig=function(){return c};var f=function(b,a,d){var c=new e.Appacitive.HttpRequest;c.url=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory.email.getSendEmailUrl();c.method="post";c.data=b;c.onSuccess=function(b){b&&b.status&&"200"==b.status.code?a(b.email):(b=b||{},b.status=b.status||{},d(b.status.message||"Server error"))};
e.Appacitive.http.send(c)};this.setupEmail=function(b){b=b||{};c.smtp.username=b.username||c.smtp.username;c.from=b.from||c.from;c.smtp.password=b.password||c.smtp.password;c.smtp.host=b.smtp.host||c.smtp.host;c.smtp.port=b.smtp.port||c.smtp.port;c.smtp.enablessl=b.enableSSL||c.smtp.enablessl;c.replyto=b.replyTo||c.replyto};this.sendTemplatedEmail=function(b,a,d){a=a||function(){};d=d||function(){};if(!b||!b.to||!b.to.length||0==b.to.length)throw Error("Atleast one receipient is mandatory to send an email");
if(!b.subject||0==b.subject.trim().length)throw Error("Subject is mandatory to send an email");if(!b.from&&c.from)throw Error("from is mandatory to send an email. Set it in config or send it in options on the portal");if(!b.templateName)throw Error("template name is mandatory to send an email");var e={to:b.to||[],cc:b.cc||[],bcc:b.bcc||[],subject:b.subject,body:{templatename:b.templateName||"",data:b.data||{},ishtml:!1==b.isHtml?!1:!0}};if(b.useConfig){e.smtp=c.smtp;if(!b.from&&!c.from)throw Error("from is mandatory to send an email. Set it in config or send it in options");
e.from=b.from||c.from;e.replyto=b.replyTo||c.replyto}f(e,a,d)};this.sendRawEmail=function(b,a,d){a=a||function(){};d=d||function(){};if(!b||!b.to||!b.to.length||0==b.to.length)throw Error("Atleast one receipient is mandatory to send an email");if(!b.subject||0==b.subject.trim().length)throw Error("Subject is mandatory to send an email");if(!b.body)throw Error("body is mandatory to send an email");var e={to:b.to||[],cc:b.cc||[],bcc:b.bcc||[],subject:b.subject,body:{content:b.body||"",ishtml:!1==b.isHtml?
!1:!0}};if(b.useConfig){e.smtp=c.smtp;if(!b.from&&!c.from)throw Error("from is mandatory to send an email. Set it in config or send it in options");e.from=b.from||c.from;e.replyto=b.replyTo||c.replyto}f(e,a,d)}}})(global);
(function(e){var c=function(){var c=require("facebook-node-sdk"),b=null;this.FB=null;this.initialize=function(a,d){if(!a)throw Error("Please provide appid");if(!d)throw Error("Please provide app secret");this.FB=new c({appId:a,secret:d})};this.requestLogin=function(a,d,c){this.FB?(b=accesstoken,FB.setAccessToken(a)):c("Intialize facebook with your appid and appsecret")};this.getCurrentUserInfo=function(a,d){this.FB&&b?(a=a||function(){},d=d||function(){},this.FB.api("/me",function(b,c){c?a(c):d("Access token is invalid")})):
d("Either intialize facebook with your appid and appsecret or set accesstoken")};this.__defineGetter__("accessToken",function(){return b});this.__defineSetter__("accessToken",function(a){console.log(a);b=a;this.FB&&this.FB.setAccessToken(a)});this.getProfilePictureUrl=function(a){return"https://graph.facebook.com/"+a+"/picture"}};e.Appacitive.facebook=e.Appacitive.runtime.isBrowser?new function(){var c=null;this.requestLogin=function(b,a){b=b||function(){};a=a||function(){};FB?FB.login(function(d){d.authResponse?
(c=d.authResponse.accessToken,b(d.authResponse)):a()},{scope:"email,user_birthday"}):a()};this.getCurrentUserInfo=function(b,a){b=b||function(){};a=a||function(){};FB.api("/me",function(d){d?b(d):a()})};this.__defineGetter__("accessToken",function(){return c});this.__defineSetter__("accessToken",function(b){c=b});this.getProfilePictureUrl=function(b){return"https://graph.facebook.com/"+b+"/picture"};this.logout=function(b,a){b=b||function(){};a=a||function(){};Appacitive.facebook.accessToken="";try{FB.logout(function(){Appacitive.Users.logout();
b()})}catch(d){a(d.message)}}}:new c})(global);
(function(e){e.Appacitive.Push=new function(){this.send=function(c,f,b){f=f||function(){};b=b||function(){};if(!c)throw Error("Please specify push options");var a=new e.Appacitive.HttpRequest;a.url=e.Appacitive.config.apiBaseUrl+Appacitive.storage.urlFactory.push.getPushUrl();a.method="post";a.data=c;a.onSuccess=function(a){a&&a.status&&"200"==a.status.code?f(a.id):(a=a||{},a.status=a.status||{},b(a.status.message||"Server error"))};a.onError=function(a){b(a||"Server error")};e.Appacitive.http.send(a)};
this.getNotification=function(c,f,b){f=f||function(){};b=b||function(){};if(!c)throw Error("Please specify notification id");var a=new e.Appacitive.HttpRequest;a.url=e.Appacitive.config.apiBaseUrl+Appacitive.storage.urlFactory.push.getGetNotificationUrl(c);a.method="get";a.onSuccess=function(a){a&&a.status&&"200"==a.status.code?f(a.pushnotification):(a=a||{},a.status=a.status||{},b(a.status.message||"Server error"))};a.onError=function(a){b(a||"Server error")};e.Appacitive.http.send(a)};this.getAllNotifications=
function(c,f,b){f=f||function(){};b=b||function(){};c?(c.pnum=c.pnum||1,c.psize=c.psize||20):c={pnum:1,psize:20};var a=new e.Appacitive.HttpRequest;a.url=e.Appacitive.config.apiBaseUrl+Appacitive.storage.urlFactory.push.getGetAllNotificationsUrl(c);a.method="get";a.onSuccess=function(a){a&&a.status&&"200"==a.status.code?f(a.pushnotifications,a.paginginfo):(a=a||{},a.status=a.status||{},b(a.status.message||"Server error"))};a.onError=function(a){b(a||"Server error")};e.Appacitive.http.send(a)}}})(global);
(function(e){e.Appacitive.File=function(c){c=c||{};this.fileId=c.fileId;this.contentType=c.contentType;this.fileData=c.fileData;var f=function(a,b,c){var f=new e.Appacitive.HttpRequest;f.url=a;f.method="GET";f.onSuccess=b;f.onError=c;e.Appacitive.http.send(f)},b=function(a,b,c,f,l){(new FormData).append("fileToUpload",b);var h=new e.Appacitive.HttpRequest;h.url=a;h.method="PUT";h.data=b;h.headers.push({key:"content-type",value:c});h.onSuccess=f;h.onError=l;h.send(!0)};this.save=function(a,d,c){if(this.fileId&&
"string"==typeof this.fileId&&0<this.fileId.length){var j=this,l=a,h=d;if(!j.fileData)throw Error("Please specify filedata");if(c||"string"==typeof c)j.contentType=c;else{if(!j.contentType||"string"!==typeof c||0==j.contentType.length)j.contentType="text/plain";try{j.contentType=file.type}catch(m){}}a=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory.file.getUpdateUrl(j.fileId,j.contentType);l=l||function(){};h=h||function(){};f(a,function(a){a&&a.status&&"200"==a.status.code?b(a.url,
j.fileData,j.contentType,function(){j.getDownloadUrl(function(a){l(a,j)},h)},h):"function"==typeof h&&h(a.status,j)},h)}else{var k=this,n=a,p=d;if(!k.fileData)throw Error("Please specify filedata");if(c||"string"==typeof c)k.contentType=c;else{if(!k.contentType||"string"!==typeof c||0==k.contentType.length)k.contentType="text/plain";try{k.contentType=file.type}catch(r){}}a=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory.file.getUploadUrl(k.contentType);n=n||function(){};p=p||function(){};
f(a,function(a){a&&a.status&&"200"==a.status.code?b(a.url,k.fileData,k.contentType,function(){k.fileId=a.id;k.getDownloadUrl(function(a){n(a,k)},p)},p):"function"==typeof p&&p(a.status,k)},p)}};this.deleteFile=function(a,b){if(!this.fileId)throw Error("Please specify fileId to delete");a=a||function(){};b=b||function(){};var c=new e.Appacitive.HttpRequest;c.url=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory.file.getDeleteUrl(this.fileId);c.method="DELETE";c.onSuccess=function(c){c&&
"200"==c.code?"function"==typeof a&&a():"function"==typeof b&&"function"==typeof b&&b(c,that)};c.onError=b;e.Appacitive.http.send(c)};this.getDownloadUrl=function(a,b){if(!this.fileId)throw Error("Please specify fileId to download");var c=this;a=a||function(){};b=b||function(){};var f=new e.Appacitive.HttpRequest;f.url=e.Appacitive.config.apiBaseUrl+e.Appacitive.storage.urlFactory.file.getDownloadUrl(this.fileId,556E4);f.method="GET";f.onSuccess=function(e){e&&e.status&&"200"==e.status.code?(c.url=
e.uri,"function"==typeof a&&a(e.uri)):"function"==typeof b&&"function"==typeof b&&b(e.status,c)};f.onError=b;e.Appacitive.http.send(f)}}})(global);
(function(e){e.Appacitive.Date={};e.Appacitive.Date.parseISODate=function(c){try{var e=new Date(c);if(isNaN(e)){if(/^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$/.exec(c)){var b=c.split("T"),a=b[0].split("-"),d=b[1].split("Z")[0].split(":"),g=d[2].split("."),j=Number(d[0]),e=new Date;e.setUTCFullYear(Number(a[0]));e.setUTCMonth(Number(a[1])-1);e.setUTCDate(Number(a[2]));e.setUTCHours(Number(j));e.setUTCMinutes(Number(d[1]));e.setUTCSeconds(Number(g[0]));
g[1]&&e.setUTCMilliseconds(Number(g[1]));return e}return null}return e}catch(l){return null}};e.Appacitive.Date.toISOString=function(c){try{return c=c.toISOString(),c=replace("Z","0000Z")}catch(e){return null}}})(global);
(function(e){e.Appacitive.localStorage=new function(){var c=e.Appacitive.runtime.isBrowser?window.localStorage:{};this.set=function(e,b){b=b||"";if(!e)return!1;if("object"==typeof b)try{b=JSON.stringify(b)}catch(a){}c[e]=b;return!0};this.get=function(e){if(!e)return null;e=c.getItem(e);if(!e)return null;if("{"==e[0])try{e=JSON.parse(e)}catch(b){}return e};this.remove=function(e){if(e)try{delete c[e]}catch(b){}}}})(global);
(function(e){e.Appacitive.runtime.isBrowser&&(e.Appacitive.Cookie=new function(){this.setCookie=function(c,e,b,a){if(b){var d=new Date;d.setTime(d.getTime()+6E4*b);d="; expires="+d.toGMTString()}a||(d="");document.cookie=c+"="+e+d+"; path=/"};this.readCookie=function(c){c+="=";for(var e=document.cookie.split(";"),b=0;b<e.length;b++){for(var a=e[b];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(c))return a.substring(c.length,a.length)}return null};this.eraseCookie=function(c){this.setCookie(c,
"",-1,!0)}})})(global);"undefined"!=typeof module&&(module.exports=function(e){global.Appacitive.initialize(e);return global.Appacitive});